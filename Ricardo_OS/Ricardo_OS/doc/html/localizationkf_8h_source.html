<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ricardo OS: /Users/kiran/Documents/Projects/ICLR/Avionics/Ricardo_OS/Ricardo_OS/src/Sensors/localizationkf.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ricardo OS
   &#160;<span id="projectnumber">1</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('localizationkf_8h_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">localizationkf.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="localizationkf_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#pragma once</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor">#include &lt;Eigen/Core&gt;</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;Eigen/Dense&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;Eigen/Eigen&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;Eigen/Geometry&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;Eigen/Sparse&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; </div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="log_controller_8h.html">Storage/logController.h</a>&quot;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="systemstatus_8h.html">Storage/systemstatus.h</a>&quot;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="sensor_structs_8h.html">sensorStructs.h</a>&quot;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160; </div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno"><a class="line" href="class_localization_k_f.html">   14</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_localization_k_f.html">LocalizationKF</a>{</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    <span class="keyword">public</span>:</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;        <a class="code" href="class_localization_k_f.html#a00c8619f7487ed4e20616698f2e440fb">LocalizationKF</a>(<a class="code" href="class_log_controller.html">LogController</a>&amp; logcontroller);</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;                </div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_localization_k_f.html#a2873598a8af341b4086be8effdd5dc65">setup</a>();</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_localization_k_f.html#a0b45816094a37dab54f6ff4ebc13d2a9">predict</a>(<span class="keyword">const</span> Eigen::Vector3f&amp; linear_acceleration,<span class="keywordtype">float</span> dt);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_localization_k_f.html#a9c00a0487100e98134ddaf123318d70b">gpsUpdate</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> lat, <span class="keyword">const</span> <span class="keywordtype">long</span> lng, <span class="keyword">const</span> <span class="keywordtype">long</span> alt,</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                            <span class="keyword">const</span> <span class="keywordtype">long</span> vn, <span class="keyword">const</span> <span class="keywordtype">long</span> ve, <span class="keyword">const</span> <span class="keywordtype">long</span> vd);</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#abb29471220060409d6bff22b2ba4b08e">   79</a></span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_localization_k_f.html#abb29471220060409d6bff22b2ba4b08e">baroUpdate</a>(){}; <span class="comment">//not implemented yet</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_localization_k_f.html#a4fdb1020f368ef41448fe02008ada591">updateGPSReference</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> lat, <span class="keyword">const</span> <span class="keywordtype">long</span> lng, <span class="keyword">const</span> <span class="keywordtype">long</span> alt);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a272e86466a5c0ddf1dffa21e1c007e8b">   96</a></span>&#160;        Eigen::Vector3f <a class="code" href="class_localization_k_f.html#a272e86466a5c0ddf1dffa21e1c007e8b">getPosition</a>(){<span class="keywordflow">return</span> <a class="code" href="class_localization_k_f.html#af5fdcbe03ae1416251f8e8b866267f46">X</a>({(uint8_t)<a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa99a0dd53807a1637c9444a067c6a6be7">STATE::Pn</a>,</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                                                (uint8_t)<a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aaefa6bbcc81e1c9c099a2b741ce910860">STATE::Pe</a>,</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                                                (uint8_t)<a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa70c62818a3aed8e80d799f643acf98b2">STATE::Pd</a>});</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                                                };</div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a8c6712f8416e09a15f487805f750bb32">  105</a></span>&#160;        Eigen::Vector3f <a class="code" href="class_localization_k_f.html#a8c6712f8416e09a15f487805f750bb32">getVelocity</a>(){<span class="keywordflow">return</span> <a class="code" href="class_localization_k_f.html#af5fdcbe03ae1416251f8e8b866267f46">X</a>({(uint8_t)<a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa579951efc1d928e2f1cf6c51e193e899">STATE::Vn</a>,</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                                                (uint8_t)<a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa421bcab9679295d92772dacc7996f425">STATE::Ve</a>,</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                                                (uint8_t)<a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aae8ed9f9ea72e4c6d128c1aefd4c13617">STATE::Vd</a>});</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                                                };</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        Eigen::Vector3f <a class="code" href="class_localization_k_f.html#adc53430b2dec651ae367cf7176b256ef">GPStoNED</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> lat, <span class="keyword">const</span> <span class="keywordtype">long</span> lng, <span class="keyword">const</span> <span class="keywordtype">long</span> alt);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="keyword">private</span>:</div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#ae8767d637d3d0ceb34474760653641c0">  121</a></span>&#160;        <a class="code" href="class_log_controller.html">LogController</a>&amp; <a class="code" href="class_localization_k_f.html#ae8767d637d3d0ceb34474760653641c0">_logcontroller</a>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#af5fdcbe03ae1416251f8e8b866267f46">  127</a></span>&#160;        Eigen::Vector&lt;float,6&gt; <a class="code" href="class_localization_k_f.html#af5fdcbe03ae1416251f8e8b866267f46">X</a> = Eigen::Vector&lt;float,6&gt;::Zero();</div>
<div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804a">  132</a></span>&#160;        <span class="keyword">enum class</span> <a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804a">STATE</a>:uint8_t{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa99a0dd53807a1637c9444a067c6a6be7">Pn</a>,</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa579951efc1d928e2f1cf6c51e193e899">Vn</a>,</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aaefa6bbcc81e1c9c099a2b741ce910860">Pe</a>,</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa421bcab9679295d92772dacc7996f425">Ve</a>,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa70c62818a3aed8e80d799f643acf98b2">Pd</a>,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <a class="code" href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aae8ed9f9ea72e4c6d128c1aefd4c13617">Vd</a></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        };</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160; </div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#ac531224a8e15ef47188438aa52d4ddda">  145</a></span>&#160;        Eigen::Matrix&lt;float,6,6&gt; <a class="code" href="class_localization_k_f.html#ac531224a8e15ef47188438aa52d4ddda">P</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160; </div>
<div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a81c1b93aa144a3672ec8d4adb8297ca6">  147</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#a81c1b93aa144a3672ec8d4adb8297ca6">accelVariance</a> = 0.1;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        <span class="comment">//GPS MEASUREMENT</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <span class="comment">//cep reference - https://gssc.esa.int/navipedia/index.php/Accuracy</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00156"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a144dc3e1f4b758d211cf721eb01c4bab">  156</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#a144dc3e1f4b758d211cf721eb01c4bab">gpsPositionVariance</a> = 2.123;</div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#aadf6881e8e0d13e4f3dde540eafedd0d">  162</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#aadf6881e8e0d13e4f3dde540eafedd0d">gpsAltitudeVariance</a> = 2.123;</div>
<div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a9586a554a8b2997164b7ba6392f2e741">  167</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#a9586a554a8b2997164b7ba6392f2e741">gpsVelocityVariance</a> = 0.00557;</div>
<div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a9326f0b3e89d8b1bb488cdb276e2e2c1">  177</a></span>&#160;        <span class="keyword">const</span> Eigen::DiagonalMatrix&lt;float,6&gt; <a class="code" href="class_localization_k_f.html#a9326f0b3e89d8b1bb488cdb276e2e2c1">R_GPS</a>{{<a class="code" href="class_localization_k_f.html#a144dc3e1f4b758d211cf721eb01c4bab">gpsPositionVariance</a>,</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                                    <a class="code" href="class_localization_k_f.html#a9586a554a8b2997164b7ba6392f2e741">gpsVelocityVariance</a>,</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                                    <a class="code" href="class_localization_k_f.html#a144dc3e1f4b758d211cf721eb01c4bab">gpsPositionVariance</a>,</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                                    <a class="code" href="class_localization_k_f.html#a9586a554a8b2997164b7ba6392f2e741">gpsVelocityVariance</a>,</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                                    <a class="code" href="class_localization_k_f.html#aadf6881e8e0d13e4f3dde540eafedd0d">gpsAltitudeVariance</a>,</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                                    <a class="code" href="class_localization_k_f.html#a9586a554a8b2997164b7ba6392f2e741">gpsVelocityVariance</a>}};</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160; </div>
<div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a5e2d855e4fe02da773e112802cbb510a">  185</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#a5e2d855e4fe02da773e112802cbb510a">baroVariance</a> = 0;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;        </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160; </div>
<div class="line"><a name="l00190"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#ad25c534c8ff0282051fa1ef7c88a3ead">  190</a></span>&#160;        Eigen::Vector3f <a class="code" href="class_localization_k_f.html#ad25c534c8ff0282051fa1ef7c88a3ead">_gpsReferenceECEF</a> = Eigen::Vector3f::Zero();</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <span class="comment">// trignometric values of lat and lng at reference coordinates</span></div>
<div class="line"><a name="l00192"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a4c5b4e1291804ceffae33d361bf6b832">  192</a></span>&#160;        <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#a4c5b4e1291804ceffae33d361bf6b832">_gpsReferenceSLat</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a34cc04ea591de2e15c4d927dd74ac277">  193</a></span>&#160;        <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#a34cc04ea591de2e15c4d927dd74ac277">_gpsReferenceCLat</a>;</div>
<div class="line"><a name="l00194"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a8681c82b46ca0c53b831f1072b2c6c83">  194</a></span>&#160;        <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#a8681c82b46ca0c53b831f1072b2c6c83">_gpsReferenceSLng</a>;</div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a46f27483d4da359a2f476c192973c911">  195</a></span>&#160;        <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#a46f27483d4da359a2f476c192973c911">_gpsReferenceCLng</a>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">//earth constants from wgs84 model</span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#a380842c73db643f55304c33915b24f3e">  197</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#a380842c73db643f55304c33915b24f3e">earthMajorAxis</a> = 6378137; <span class="comment">// equitorial radius (m)</span></div>
<div class="line"><a name="l00198"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#aaac95965acaf4eb085671aaf47536839">  198</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#aaac95965acaf4eb085671aaf47536839">earthEccentricity2</a> = 0.00669437999014; <span class="comment">// eccentricity squared</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">//conversion constant </span></div>
<div class="line"><a name="l00200"></a><span class="lineno"><a class="line" href="class_localization_k_f.html#aadafda534f1643df0a4c10f84c420c87">  200</a></span>&#160;        <span class="keyword">const</span> <span class="keywordtype">float</span> <a class="code" href="class_localization_k_f.html#aadafda534f1643df0a4c10f84c420c87">degtorad</a> = 0.01745329251;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        Eigen::Vector3f <a class="code" href="class_localization_k_f.html#aaa14cdfb2ff3eabba986b45ef2bc3df4">GPStoECEF</a>(<span class="keyword">const</span> <span class="keywordtype">long</span> lat, <span class="keyword">const</span> <span class="keywordtype">long</span> lng, <span class="keyword">const</span> <span class="keywordtype">long</span> alt);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        </div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160; </div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        </div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;};</div>
<div class="ttc" id="aclass_localization_k_f_html"><div class="ttname"><a href="class_localization_k_f.html">LocalizationKF</a></div><div class="ttdef"><b>Definition:</b> localizationkf.h:14</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a00c8619f7487ed4e20616698f2e440fb"><div class="ttname"><a href="class_localization_k_f.html#a00c8619f7487ed4e20616698f2e440fb">LocalizationKF::LocalizationKF</a></div><div class="ttdeci">LocalizationKF(LogController &amp;logcontroller)</div><div class="ttdef"><b>Definition:</b> localizationkf.cpp:11</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a0b45816094a37dab54f6ff4ebc13d2a9"><div class="ttname"><a href="class_localization_k_f.html#a0b45816094a37dab54f6ff4ebc13d2a9">LocalizationKF::predict</a></div><div class="ttdeci">void predict(const Eigen::Vector3f &amp;linear_acceleration, float dt)</div><div class="ttdoc">Propagate state transition.</div><div class="ttdef"><b>Definition:</b> localizationkf.cpp:21</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a144dc3e1f4b758d211cf721eb01c4bab"><div class="ttname"><a href="class_localization_k_f.html#a144dc3e1f4b758d211cf721eb01c4bab">LocalizationKF::gpsPositionVariance</a></div><div class="ttdeci">const float gpsPositionVariance</div><div class="ttdoc">Gps position variance given by the CEP ~ 2.5m.</div><div class="ttdef"><b>Definition:</b> localizationkf.h:156</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a272e86466a5c0ddf1dffa21e1c007e8b"><div class="ttname"><a href="class_localization_k_f.html#a272e86466a5c0ddf1dffa21e1c007e8b">LocalizationKF::getPosition</a></div><div class="ttdeci">Eigen::Vector3f getPosition()</div><div class="ttdoc">Get the Position vector (Pn, Pe, Pd)</div><div class="ttdef"><b>Definition:</b> localizationkf.h:96</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a2873598a8af341b4086be8effdd5dc65"><div class="ttname"><a href="class_localization_k_f.html#a2873598a8af341b4086be8effdd5dc65">LocalizationKF::setup</a></div><div class="ttdeci">void setup()</div><div class="ttdoc">Initialize Filter.</div><div class="ttdef"><b>Definition:</b> localizationkf.cpp:15</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a34cc04ea591de2e15c4d927dd74ac277"><div class="ttname"><a href="class_localization_k_f.html#a34cc04ea591de2e15c4d927dd74ac277">LocalizationKF::_gpsReferenceCLat</a></div><div class="ttdeci">float _gpsReferenceCLat</div><div class="ttdef"><b>Definition:</b> localizationkf.h:193</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a380842c73db643f55304c33915b24f3e"><div class="ttname"><a href="class_localization_k_f.html#a380842c73db643f55304c33915b24f3e">LocalizationKF::earthMajorAxis</a></div><div class="ttdeci">const float earthMajorAxis</div><div class="ttdef"><b>Definition:</b> localizationkf.h:197</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a46f27483d4da359a2f476c192973c911"><div class="ttname"><a href="class_localization_k_f.html#a46f27483d4da359a2f476c192973c911">LocalizationKF::_gpsReferenceCLng</a></div><div class="ttdeci">float _gpsReferenceCLng</div><div class="ttdef"><b>Definition:</b> localizationkf.h:195</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a4c5b4e1291804ceffae33d361bf6b832"><div class="ttname"><a href="class_localization_k_f.html#a4c5b4e1291804ceffae33d361bf6b832">LocalizationKF::_gpsReferenceSLat</a></div><div class="ttdeci">float _gpsReferenceSLat</div><div class="ttdef"><b>Definition:</b> localizationkf.h:192</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a4fdb1020f368ef41448fe02008ada591"><div class="ttname"><a href="class_localization_k_f.html#a4fdb1020f368ef41448fe02008ada591">LocalizationKF::updateGPSReference</a></div><div class="ttdeci">void updateGPSReference(const long lat, const long lng, const long alt)</div><div class="ttdoc">update the reference gps coordinates (the launch site)</div><div class="ttdef"><b>Definition:</b> localizationkf.cpp:76</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a5e2d855e4fe02da773e112802cbb510a"><div class="ttname"><a href="class_localization_k_f.html#a5e2d855e4fe02da773e112802cbb510a">LocalizationKF::baroVariance</a></div><div class="ttdeci">const float baroVariance</div><div class="ttdef"><b>Definition:</b> localizationkf.h:185</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a81c1b93aa144a3672ec8d4adb8297ca6"><div class="ttname"><a href="class_localization_k_f.html#a81c1b93aa144a3672ec8d4adb8297ca6">LocalizationKF::accelVariance</a></div><div class="ttdeci">const float accelVariance</div><div class="ttdef"><b>Definition:</b> localizationkf.h:147</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a8681c82b46ca0c53b831f1072b2c6c83"><div class="ttname"><a href="class_localization_k_f.html#a8681c82b46ca0c53b831f1072b2c6c83">LocalizationKF::_gpsReferenceSLng</a></div><div class="ttdeci">float _gpsReferenceSLng</div><div class="ttdef"><b>Definition:</b> localizationkf.h:194</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a8c6712f8416e09a15f487805f750bb32"><div class="ttname"><a href="class_localization_k_f.html#a8c6712f8416e09a15f487805f750bb32">LocalizationKF::getVelocity</a></div><div class="ttdeci">Eigen::Vector3f getVelocity()</div><div class="ttdoc">Get the Velocity vector (Vn, Ve, Vd)</div><div class="ttdef"><b>Definition:</b> localizationkf.h:105</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a918865a864705c58ca9ad5e9ebef804a"><div class="ttname"><a href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804a">LocalizationKF::STATE</a></div><div class="ttdeci">STATE</div><div class="ttdoc">Enum containing indicies of state variables.</div><div class="ttdef"><b>Definition:</b> localizationkf.h:132</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a918865a864705c58ca9ad5e9ebef804aa421bcab9679295d92772dacc7996f425"><div class="ttname"><a href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa421bcab9679295d92772dacc7996f425">LocalizationKF::STATE::Ve</a></div><div class="ttdeci">@ Ve</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a918865a864705c58ca9ad5e9ebef804aa579951efc1d928e2f1cf6c51e193e899"><div class="ttname"><a href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa579951efc1d928e2f1cf6c51e193e899">LocalizationKF::STATE::Vn</a></div><div class="ttdeci">@ Vn</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a918865a864705c58ca9ad5e9ebef804aa70c62818a3aed8e80d799f643acf98b2"><div class="ttname"><a href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa70c62818a3aed8e80d799f643acf98b2">LocalizationKF::STATE::Pd</a></div><div class="ttdeci">@ Pd</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a918865a864705c58ca9ad5e9ebef804aa99a0dd53807a1637c9444a067c6a6be7"><div class="ttname"><a href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aa99a0dd53807a1637c9444a067c6a6be7">LocalizationKF::STATE::Pn</a></div><div class="ttdeci">@ Pn</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a918865a864705c58ca9ad5e9ebef804aae8ed9f9ea72e4c6d128c1aefd4c13617"><div class="ttname"><a href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aae8ed9f9ea72e4c6d128c1aefd4c13617">LocalizationKF::STATE::Vd</a></div><div class="ttdeci">@ Vd</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a918865a864705c58ca9ad5e9ebef804aaefa6bbcc81e1c9c099a2b741ce910860"><div class="ttname"><a href="class_localization_k_f.html#a918865a864705c58ca9ad5e9ebef804aaefa6bbcc81e1c9c099a2b741ce910860">LocalizationKF::STATE::Pe</a></div><div class="ttdeci">@ Pe</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a9326f0b3e89d8b1bb488cdb276e2e2c1"><div class="ttname"><a href="class_localization_k_f.html#a9326f0b3e89d8b1bb488cdb276e2e2c1">LocalizationKF::R_GPS</a></div><div class="ttdeci">const Eigen::DiagonalMatrix&lt; float, 6 &gt; R_GPS</div><div class="ttdoc">Covaraince Matrix for the GPS measurements. We assume the variance is constant here where the positio...</div><div class="ttdef"><b>Definition:</b> localizationkf.h:177</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a9586a554a8b2997164b7ba6392f2e741"><div class="ttname"><a href="class_localization_k_f.html#a9586a554a8b2997164b7ba6392f2e741">LocalizationKF::gpsVelocityVariance</a></div><div class="ttdeci">const float gpsVelocityVariance</div><div class="ttdoc">Gps velocity variance given as +- 0.05ms-1 @ 50%.</div><div class="ttdef"><b>Definition:</b> localizationkf.h:167</div></div>
<div class="ttc" id="aclass_localization_k_f_html_a9c00a0487100e98134ddaf123318d70b"><div class="ttname"><a href="class_localization_k_f.html#a9c00a0487100e98134ddaf123318d70b">LocalizationKF::gpsUpdate</a></div><div class="ttdeci">void gpsUpdate(const long lat, const long lng, const long alt, const long vn, const long ve, const long vd)</div><div class="ttdoc">Add new gps measurement to position estimate.</div><div class="ttdef"><b>Definition:</b> localizationkf.cpp:53</div></div>
<div class="ttc" id="aclass_localization_k_f_html_aaa14cdfb2ff3eabba986b45ef2bc3df4"><div class="ttname"><a href="class_localization_k_f.html#aaa14cdfb2ff3eabba986b45ef2bc3df4">LocalizationKF::GPStoECEF</a></div><div class="ttdeci">Eigen::Vector3f GPStoECEF(const long lat, const long lng, const long alt)</div><div class="ttdef"><b>Definition:</b> localizationkf.cpp:84</div></div>
<div class="ttc" id="aclass_localization_k_f_html_aaac95965acaf4eb085671aaf47536839"><div class="ttname"><a href="class_localization_k_f.html#aaac95965acaf4eb085671aaf47536839">LocalizationKF::earthEccentricity2</a></div><div class="ttdeci">const float earthEccentricity2</div><div class="ttdef"><b>Definition:</b> localizationkf.h:198</div></div>
<div class="ttc" id="aclass_localization_k_f_html_aadafda534f1643df0a4c10f84c420c87"><div class="ttname"><a href="class_localization_k_f.html#aadafda534f1643df0a4c10f84c420c87">LocalizationKF::degtorad</a></div><div class="ttdeci">const float degtorad</div><div class="ttdef"><b>Definition:</b> localizationkf.h:200</div></div>
<div class="ttc" id="aclass_localization_k_f_html_aadf6881e8e0d13e4f3dde540eafedd0d"><div class="ttname"><a href="class_localization_k_f.html#aadf6881e8e0d13e4f3dde540eafedd0d">LocalizationKF::gpsAltitudeVariance</a></div><div class="ttdeci">const float gpsAltitudeVariance</div><div class="ttdoc">Gps Altitude variance differs from horizontal variance but for now assume its the same....</div><div class="ttdef"><b>Definition:</b> localizationkf.h:162</div></div>
<div class="ttc" id="aclass_localization_k_f_html_abb29471220060409d6bff22b2ba4b08e"><div class="ttname"><a href="class_localization_k_f.html#abb29471220060409d6bff22b2ba4b08e">LocalizationKF::baroUpdate</a></div><div class="ttdeci">void baroUpdate()</div><div class="ttdoc">Add new baro measurement to position estimate.</div><div class="ttdef"><b>Definition:</b> localizationkf.h:79</div></div>
<div class="ttc" id="aclass_localization_k_f_html_ac531224a8e15ef47188438aa52d4ddda"><div class="ttname"><a href="class_localization_k_f.html#ac531224a8e15ef47188438aa52d4ddda">LocalizationKF::P</a></div><div class="ttdeci">Eigen::Matrix&lt; float, 6, 6 &gt; P</div><div class="ttdoc">State Covariance Matrix.</div><div class="ttdef"><b>Definition:</b> localizationkf.h:145</div></div>
<div class="ttc" id="aclass_localization_k_f_html_ad25c534c8ff0282051fa1ef7c88a3ead"><div class="ttname"><a href="class_localization_k_f.html#ad25c534c8ff0282051fa1ef7c88a3ead">LocalizationKF::_gpsReferenceECEF</a></div><div class="ttdeci">Eigen::Vector3f _gpsReferenceECEF</div><div class="ttdef"><b>Definition:</b> localizationkf.h:190</div></div>
<div class="ttc" id="aclass_localization_k_f_html_adc53430b2dec651ae367cf7176b256ef"><div class="ttname"><a href="class_localization_k_f.html#adc53430b2dec651ae367cf7176b256ef">LocalizationKF::GPStoNED</a></div><div class="ttdeci">Eigen::Vector3f GPStoNED(const long lat, const long lng, const long alt)</div><div class="ttdoc">Get the relative NED coordinates from the reference point in m.</div><div class="ttdef"><b>Definition:</b> localizationkf.cpp:100</div></div>
<div class="ttc" id="aclass_localization_k_f_html_ae8767d637d3d0ceb34474760653641c0"><div class="ttname"><a href="class_localization_k_f.html#ae8767d637d3d0ceb34474760653641c0">LocalizationKF::_logcontroller</a></div><div class="ttdeci">LogController &amp; _logcontroller</div><div class="ttdef"><b>Definition:</b> localizationkf.h:121</div></div>
<div class="ttc" id="aclass_localization_k_f_html_af5fdcbe03ae1416251f8e8b866267f46"><div class="ttname"><a href="class_localization_k_f.html#af5fdcbe03ae1416251f8e8b866267f46">LocalizationKF::X</a></div><div class="ttdeci">Eigen::Vector&lt; float, 6 &gt; X</div><div class="ttdoc">State variable [pn, vn, pe, ve, pd, vd].</div><div class="ttdef"><b>Definition:</b> localizationkf.h:127</div></div>
<div class="ttc" id="aclass_log_controller_html"><div class="ttname"><a href="class_log_controller.html">LogController</a></div><div class="ttdef"><b>Definition:</b> logController.h:27</div></div>
<div class="ttc" id="alog_controller_8h_html"><div class="ttname"><a href="log_controller_8h.html">logController.h</a></div></div>
<div class="ttc" id="asensor_structs_8h_html"><div class="ttname"><a href="sensor_structs_8h.html">sensorStructs.h</a></div></div>
<div class="ttc" id="asystemstatus_8h_html"><div class="ttname"><a href="systemstatus_8h.html">systemstatus.h</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_afe58f6d0ef7eec69c2706509daaefe7.html">Sensors</a></li><li class="navelem"><a class="el" href="localizationkf_8h.html">localizationkf.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
