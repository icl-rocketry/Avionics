<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Ricardo OS: ArduinoJson: change log</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ricardo OS
   &#160;<span id="projectnumber">1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ArduinoJson: change log </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1"></a>
HEAD</h1>
<ul>
<li>Made <code>JsonDocument</code>'s destructor protected (issue #1480)</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
v6.17.2 (2020-11-14)</h1>
<ul>
<li>Fixed invalid conversion error in <code>operator|(JsonVariant, char*)</code> (issue #1432)</li>
<li>Changed the default value of <code>ARDUINOJSON_ENABLE_PROGMEM</code> (issue #1433). It now checks that the <code>pgm_read_XXX</code> macros are defined before enabling <code>PROGMEM</code>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md3"></a>
v6.17.1 (2020-11-07)</h1>
<ul>
<li>Fixed error &lsquo;ambiguous overload for 'operator|&rsquo;<code>(issue #1411)</code></li>
<li><code>Fixed</code>operator|(MemberProxy, JsonObject)` (issue #1415)</li>
<li>Allowed more than 32767 values in non-embedded mode (issue #1414)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
v6.17.0 (2020-10-19)</h1>
<ul>
<li>Added a build failure when nullptr is defined as a macro (issue #1355)</li>
<li>Added <code>JsonDocument::overflowed()</code> which tells if the memory pool was too small (issue #1358)</li>
<li>Added <code>DeserializationError::EmptyInput</code> which tells if the input was empty</li>
<li>Added <code>DeserializationError::f_str()</code> which returns a <code>const __FlashStringHelper*</code> (issue #846)</li>
<li>Added <code>operator|(JsonVariantConst, JsonVariantConst)</code></li>
<li>Added filtering for MessagePack (issue #1298, PR #1394 by Luca Passarella)</li>
<li>Moved float convertion tables to PROGMEM</li>
<li>Fixed <code>JsonVariant::set((char*)0)</code> which returned false instead of true (issue #1368)</li>
<li>Fixed error <code>No such file or directory #include &lt;WString.h&gt;</code> (issue #1381)</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
v6.16.1 (2020-08-04)</h1>
<ul>
<li>Fixed <code>deserializeJson()</code> that stopped reading after <code>{}</code> (issue #1335)</li>
</ul>
<h1><a class="anchor" id="autotoc_md6"></a>
v6.16.0 (2020-08-01)</h1>
<ul>
<li>Added comparisons (<code>&gt;</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>, <code>&lt;</code>, and <code>&lt;=</code>) between <code>JsonVariant</code>s</li>
<li>Added string deduplication (issue #1303)</li>
<li>Added <code>JsonString::operator!=</code></li>
<li>Added wildcard key (<code>*</code>) for filters (issue #1309)</li>
<li>Set <code>ARDUINOJSON_DECODE_UNICODE</code> to <code>1</code> by default</li>
<li>Fixed <code>copyArray()</code> not working with <code><a class="el" href="class_string.html">String</a></code>, <code>ElementProxy</code>, and <code>MemberProxy</code></li>
<li>Fixed error <code>getOrAddElement is not a member of ElementProxy</code> (issue #1311)</li>
<li>Fixed excessive stack usage when compiled with <code>-Og</code> (issues #1210 and #1314)</li>
<li>Fixed <code>Warning[Pa093]: implicit conversion from floating point to integer</code> on IAR compiler (PR #1328 by @stawiski)</li>
</ul>
<h1><a class="anchor" id="autotoc_md7"></a>
v6.15.2 (2020-05-15)</h1>
<ul>
<li>CMake: don't build tests when imported in another project</li>
<li>CMake: made project arch-independent</li>
<li>Visual Studio: fixed error C2766 with flag <code>/Zc:__cplusplus</code> (issue #1250)</li>
<li>Added support for <code>JsonDocument</code> to <code>copyArray()</code> (issue #1255)</li>
<li>Added support for <code>enum</code>s in <code>as&lt;T&gt;()</code> and <code>is&lt;T&gt;()</code> (issue #1256)</li>
<li>Added <code>JsonVariant</code> as an input type for <code>deserializeXxx()</code> <br  />
 For example, you can do: <code>deserializeJson(doc2, doc1["payload"])</code></li>
<li>Break the build if using 64-bit integers with ARDUINOJSON_USE_LONG_LONG==0</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
v6.15.1 (2020-04-08)</h1>
<ul>
<li>Fixed "maybe-uninitialized" warning (issue #1217)</li>
<li>Fixed "statement is unreachable" warning on IAR (issue #1233)</li>
<li>Fixed "pointless integer comparison" warning on IAR (issue #1233)</li>
<li>Added CMake "install" target (issue #1209)</li>
<li>Disabled alignment on AVR (issue #1231)</li>
</ul>
<h1><a class="anchor" id="autotoc_md9"></a>
v6.15.0 (2020-03-22)</h1>
<ul>
<li>Added <code>DeserializationOption::Filter</code> (issue #959)</li>
<li>Added example <code>JsonFilterExample.ino</code></li>
<li>Changed the array subscript operator to automatically add missing elements</li>
<li>Fixed "deprecated-copy" warning on GCC 9 (fixes #1184)</li>
<li>Fixed <code>MemberProxy::set(char[])</code> not duplicating the string (issue #1191)</li>
<li>Fixed enums serialized as booleans (issue #1197)</li>
<li>Fixed incorrect string comparison on some platforms (issue #1198)</li>
<li>Added move-constructor and move-assignment to <code>BasicJsonDocument</code></li>
<li>Added <code>BasicJsonDocument::garbageCollect()</code> (issue #1195)</li>
<li>Added <code>StaticJsonDocument::garbageCollect()</code></li>
<li>Changed copy-constructor of <code>BasicJsonDocument</code> to preserve the capacity of the source.</li>
<li>Removed copy-constructor of <code>JsonDocument</code> (issue #1189)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md10"></a>
Copy-constructor of &lt;tt&gt;BasicJsonDocument&lt;/tt&gt;</h3>
<p>In previous versions, the copy constructor of <code>BasicJsonDocument</code> looked at the source's <code>memoryUsage()</code> to choose its capacity. Now, the copy constructor of <code>BasicJsonDocument</code> uses the same capacity as the source.</p>
<p>Example:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc1(64);</div>
<div class="line">doc1.set(String(&quot;example&quot;));</div>
<div class="line"> </div>
<div class="line">DynamicJsonDocument doc2 = doc1;</div>
<div class="line">Serial.print(doc2.capacity());  // 8 with ArduinoJson 6.14</div>
<div class="line">                                // 64 with ArduinoJson 6.15</div>
</div><!-- fragment --><p>I made this change to get consistent results between copy-constructor and move-constructor, and whether RVO applies or not.</p>
<p>If you use the copy-constructor to optimize your documents, you can use <code>garbageCollect()</code> or <code>shrinkToFit()</code> instead.</p>
<h3><a class="anchor" id="autotoc_md11"></a>
Copy-constructor of &lt;tt&gt;JsonDocument&lt;/tt&gt;</h3>
<p>In previous versions, it was possible to create a function that take a <code>JsonDocument</code> by value.</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">void myFunction(JsonDocument doc) {}</div>
</div><!-- fragment --><p>This function gives the wrong clues because it doesn't receive a copy of the <code>JsonDocument</code>, only a sliced version. It worked because the copy constructor copied the internal pointers, but it was an accident.</p>
<p>From now, if you need to pass a <code>JsonDocument</code> to a function, you must use a reference:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">void myFunction(JsonDocument&amp; doc) {}</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md12"></a>
v6.14.1 (2020-01-27)</h1>
<ul>
<li>Fixed regression in UTF16 decoding (issue #1173)</li>
<li>Fixed <code>containsKey()</code> on <code>JsonVariantConst</code></li>
<li>Added <code>getElement()</code> and <code>getMember()</code> to <code>JsonVariantConst</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
v6.14.0 (2020-01-16)</h1>
<ul>
<li>Added <code>BasicJsonDocument::shrinkToFit()</code></li>
<li>Added support of <code>uint8_t</code> for <code>serializeJson()</code>, <code>serializeJsonPretty()</code>, and <code>serializeMsgPack()</code> (issue #1142)</li>
<li>Added <code>ARDUINOJSON_ENABLE_COMMENTS</code> to enable support for comments (defaults to 0)</li>
<li>Auto enable support for <code>std::string</code> and <code>std::stream</code> on modern compilers (issue #1156) (No need to define <code>ARDUINOJSON_ENABLE_STD_STRING</code> and <code>ARDUINOJSON_ENABLE_STD_STREAM</code> anymore)</li>
<li>Improved decoding of UTF-16 surrogate pairs (PR #1157 by @kaysievers) (ArduinoJson now produces standard UTF-8 instead of CESU-8)</li>
<li>Added <code>measureJson</code>, <code>measureJsonPretty</code>, and <code>measureMsgPack</code> to <code>keywords.txt</code> (This file is used for syntax highlighting in the Arduino IDE)</li>
<li>Fixed <code>variant.is&lt;nullptr_t&gt;()</code></li>
<li>Fixed value returned by <code>serializeJson()</code>, <code>serializeJsonPretty()</code>, and <code>serializeMsgPack()</code> when writing to a <code><a class="el" href="class_string.html">String</a></code></li>
<li>Improved speed of <code>serializeJson()</code>, <code>serializeJsonPretty()</code>, and <code>serializeMsgPack()</code> when writing to a <code><a class="el" href="class_string.html">String</a></code></li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md14"></a>
Comments</h3>
<p>Support for comments in input is now optional and disabled by default.</p>
<p>If you need support for comments, you must defined <code>ARDUINOJSON_ENABLE_COMMENTS</code> to <code>1</code>; otherwise, you'll receive <code>InvalidInput</code> errors.</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">#define ARDUINOJSON_ENABLE_COMMENTS 1</div>
<div class="line">#include &lt;ArduinoJson.h&gt;</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md15"></a>
v6.13.0 (2019-11-01)</h1>
<ul>
<li>Added support for custom writer/reader classes (issue #1088)</li>
<li>Added conversion from <code>JsonArray</code> and <code>JsonObject</code> to <code>bool</code>, to be consistent with <code>JsonVariant</code></li>
<li>Fixed <code>deserializeJson()</code> when input contains duplicate keys (issue #1095)</li>
<li>Improved <code>deserializeMsgPack()</code> speed by reading several bytes at once</li>
<li>Added detection of Atmel AVR8/GNU C Compiler (issue #1112)</li>
<li>Fixed deserializer that stopped reading at the first <code>0xFF</code> (PR #1118 by @mikee47)</li>
<li>Fixed dangling reference in copies of <code>MemberProxy</code> and <code>ElementProxy</code> (issue #1120)</li>
</ul>
<h1><a class="anchor" id="autotoc_md16"></a>
v6.12.0 (2019-09-05)</h1>
<ul>
<li>Use absolute instead of relative includes (issue #1072)</li>
<li>Changed <code>JsonVariant::as&lt;bool&gt;()</code> to return <code>true</code> for any non-null value (issue #1005)</li>
<li>Moved ancillary files to <code>extras/</code> (issue #1011)</li>
</ul>
<h1><a class="anchor" id="autotoc_md17"></a>
v6.11.5 (2019-08-23)</h1>
<ul>
<li>Added fallback implementations of <code>strlen_P()</code>, <code>strncmp_P()</code>, <code>strcmp_P()</code>, and <code>memcpy_P()</code> (issue #1073)</li>
</ul>
<h1><a class="anchor" id="autotoc_md18"></a>
v6.11.4 (2019-08-12)</h1>
<ul>
<li>Added <code>measureJson()</code> to the <code>ArduinoJson</code> namespace (PR #1069 by @nomis)</li>
<li>Added support for <code>basic_string&lt;char, traits, allocator&gt;</code> (issue #1045)</li>
<li>Fixed example <code>JsonConfigFile.ino</code> for ESP8266</li>
<li>Include <code><a class="el" href="_arduino_8h_source.html">Arduino.h</a></code> if <code>ARDUINO</code> is defined (PR #1071 by @nomis)</li>
</ul>
<h1><a class="anchor" id="autotoc_md19"></a>
v6.11.3 (2019-07-22)</h1>
<ul>
<li>Added operators <code>==</code> and <code>!=</code> for <code>JsonDocument</code>, <code>ElementProxy</code>, and <code>MemberProxy</code></li>
<li>Fixed comparison of <code>JsonVariant</code> when one contains a linked string and the other contains an owned string (issue #1051)</li>
</ul>
<h1><a class="anchor" id="autotoc_md20"></a>
v6.11.2 (2019-07-08)</h1>
<ul>
<li>Fixed assignment of <code>JsonDocument</code> to <code>JsonVariant</code> (issue #1023)</li>
<li>Fix invalid conversion error on Particle Argon (issue #1035)</li>
</ul>
<h1><a class="anchor" id="autotoc_md21"></a>
v6.11.1 (2019-06-21)</h1>
<ul>
<li>Fixed <code>serialized()</code> not working with Flash strings (issue #1030)</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
v6.11.0 (2019-05-26)</h1>
<ul>
<li>Fixed <code>deserializeJson()</code> silently accepting a <code>Stream*</code> (issue #978)</li>
<li>Fixed invalid result from <code>operator|</code> (issue #981)</li>
<li>Made <code>deserializeJson()</code> more picky about trailing characters (issue #980)</li>
<li>Added <code>ARDUINOJSON_ENABLE_NAN</code> (default=0) to enable NaN in JSON (issue #973)</li>
<li>Added <code>ARDUINOJSON_ENABLE_INFINITY</code> (default=0) to enable Infinity in JSON</li>
<li>Removed implicit conversion in comparison operators (issue #998)</li>
<li>Added lexicographical comparison for <code>JsonVariant</code></li>
<li>Added support for <code>nullptr</code> (issue #998)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md23"></a>
NaN and Infinity</h3>
<p>The JSON specification allows neither NaN not Infinity, but previous versions of ArduinoJson supported it. Now, ArduinoJson behaves like most other libraries: a NaN or and Infinity in the <code>JsonDocument</code>, becomes a <code>null</code> in the output JSON. Also, <code>deserializeJson()</code> returns <code>InvalidInput</code> if the JSON document contains NaN or Infinity.</p>
<p>This version still supports NaN and Infinity in JSON documents, but it's disabled by default to be compatible with other JSON parsers. If you need the old behavior back, define <code>ARDUINOJSON_ENABLE_NAN</code> and <code>ARDUINOJSON_ENABLE_INFINITY</code> to <code>1</code>;:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">#define ARDUINOJSON_ENABLE_NAN 1</div>
<div class="line">#define ARDUINOJSON_ENABLE_INFINITY 1</div>
<div class="line">#include &lt;ArduinoJson.h&gt;</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md24"></a>
The "or" operator</h3>
<p>This version slightly changes the behavior of the | operator when the variant contains a float and the user requests an integer.</p>
<p>Older versions returned the floating point value truncated. Now, it returns the default value.</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">// suppose variant contains 1.2</div>
<div class="line">int value = variant | 3;</div>
<div class="line"> </div>
<div class="line">// old behavior:</div>
<div class="line">value == 1</div>
<div class="line"> </div>
<div class="line">// new behavior</div>
<div class="line">value == 3</div>
</div><!-- fragment --><p>If you need the old behavior, you must add <code>if (variant.is&lt;float&gt;())</code>. </p>
<h1><a class="anchor" id="autotoc_md25"></a>
v6.10.1 (2019-04-23)</h1>
<ul>
<li>Fixed error "attributes are not allowed on a function-definition"</li>
<li>Fixed <code>deserializeJson()</code> not being picky enough (issue #969)</li>
<li>Fixed error "no matching function for call to write(uint8_t)" (issue #972)</li>
</ul>
<h1><a class="anchor" id="autotoc_md26"></a>
v6.10.0 (2019-03-22)</h1>
<ul>
<li>Fixed an integer overflow in the JSON deserializer</li>
<li>Added overflow handling in <code>JsonVariant::as&lt;T&gt;()</code> and <code>JsonVariant::is&lt;T&gt;()</code>.<ul>
<li><code>as&lt;T&gt;()</code> returns <code>0</code> if the integer <code>T</code> overflows</li>
<li><code>is&lt;T&gt;()</code> returns <code>false</code> if the integer <code>T</code> overflows</li>
</ul>
</li>
<li>Added <code>BasicJsonDocument</code> to support custom allocator (issue #876)</li>
<li>Added <code>JsonDocument::containsKey()</code> (issue #938)</li>
<li>Added <code>JsonVariant::containsKey()</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md27"></a>
v6.9.1 (2019-03-01)</h1>
<ul>
<li>Fixed warning "unused variable" with GCC 4.4 (issue #912)</li>
<li>Fixed warning "cast  increases required alignment" (issue #914)</li>
<li>Fixed warning "conversion may alter value" (issue #914)</li>
<li>Fixed naming conflict with "CAPACITY" (issue #839)</li>
<li>Muted warning "will change in GCC 7.1" (issue #914)</li>
<li>Added a clear error message for <code>StaticJsonBuffer</code> and <code>DynamicJsonBuffer</code></li>
<li>Marked ArduinoJson.h as a "system header"</li>
</ul>
<h1><a class="anchor" id="autotoc_md28"></a>
v6.9.0 (2019-02-26)</h1>
<ul>
<li>Decode escaped Unicode characters like \u00DE (issue #304, PR #791) Many thanks to Daniel Schulte (aka @trilader) who implemented this feature.</li>
<li>Added option ARDUINOJSON_DECODE_UNICODE to enable it</li>
<li>Converted <code>JsonArray::copyFrom()/copyTo()</code> to free functions <code>copyArray()</code></li>
<li>Renamed <code>JsonArray::copyFrom()</code> and <code>JsonObject::copyFrom()</code> to <code>set()</code></li>
<li>Renamed <code>JsonArray::get()</code> to <code>getElement()</code></li>
<li>Renamed <code>JsonArray::add()</code> (without arg) to <code>addElement()</code></li>
<li>Renamed <code>JsonObject::get()</code> to <code>getMember()</code></li>
<li>Renamed <code>JsonObject::getOrCreate()</code> to <code>getOrAddMember()</code></li>
<li>Fixed <code>JsonVariant::isNull()</code> not returning <code>true</code> after <code>set((char*)0)</code></li>
<li>Fixed segfault after <code>variant.set(serialized((char*)0))</code></li>
<li>Detect <code>IncompleteInput</code> in <code>false</code>, <code>true</code>, and <code>null</code></li>
<li>Added <code>JsonDocument::size()</code></li>
<li>Added <code>JsonDocument::remove()</code></li>
<li>Added <code>JsonVariant::clear()</code></li>
<li>Added <code>JsonVariant::remove()</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md29"></a>
v6.8.0-beta (2019-01-30)</h1>
<ul>
<li>Import functions in the ArduinoJson namespace to get clearer errors</li>
<li>Improved syntax highlighting in Arduino IDE</li>
<li>Removed default capacity of <code>DynamicJsonDocument</code></li>
<li><code>JsonArray::copyFrom()</code> accepts <code>JsonArrayConst</code></li>
<li><code>JsonVariant::set()</code> accepts <code>JsonArrayConst</code> and <code>JsonObjectConst</code></li>
<li><code>JsonDocument</code> was missing in the ArduinoJson namespace</li>
<li>Added <code>memoryUsage()</code> to <code>JsonArray</code>, <code>JsonObject</code>, and <code>JsonVariant</code></li>
<li>Added <code>nesting()</code> to <code>JsonArray</code>, <code>JsonDocument</code>, <code>JsonObject</code>, and <code>JsonVariant</code></li>
<li>Replaced <code>JsonDocument::nestingLimit</code> with an additional parameter to <code>deserializeJson()</code> and <code>deserializeMsgPack()</code></li>
<li>Fixed uninitialized variant in <code>JsonDocument</code></li>
<li>Fixed <code>StaticJsonDocument</code> copy constructor and copy assignment</li>
<li>The copy constructor of <code>DynamicJsonDocument</code> chooses the capacity according to the memory usage of the source, not from the capacity of the source.</li>
<li>Added the ability to create/assign a <code>StaticJsonDocument</code>/<code>DynamicJsonDocument</code> from a <code>JsonArray</code>/<code>JsonObject</code>/<code>JsonVariant</code></li>
<li>Added <code>JsonDocument::isNull()</code></li>
<li>Added <code>JsonDocument::operator[]</code></li>
<li>Added <code>ARDUINOJSON_TAB</code> to configure the indentation character</li>
<li>Reduced the size of the pretty JSON serializer</li>
<li>Added <code>add()</code>, <code>createNestedArray()</code> and <code>createNestedObject()</code> to <code>JsonVariant</code></li>
<li><code>JsonVariant</code> automatically promotes to <code>JsonObject</code> or <code>JsonArray</code> on write. Calling <code>JsonVariant::to&lt;T&gt;()</code> is not required anymore.</li>
<li><code>JsonDocument</code> now support the same operations as <code>JsonVariant</code>. Calling <code>JsonDocument::as&lt;T&gt;()</code> is not required anymore.</li>
<li>Fixed example <code>JsonHttpClient.ino</code></li>
<li>User can now use a <code>JsonString</code> as a key or a value</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md30"></a>
&lt;tt&gt;DynamicJsonDocument&lt;/tt&gt;'s constructor</h3>
<p>The parameter to the constructor of <code>DynamicJsonDocument</code> is now mandatory</p>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc;</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc(1024);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md31"></a>
Nesting limit</h3>
<p><code>JsonDocument::nestingLimit</code> was replaced with a new parameter to <code>deserializeJson()</code> and <code>deserializeMsgPack()</code>.</p>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">doc.nestingLimit = 15;</div>
<div class="line">deserializeJson(doc, input);</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">deserializeJson(doc, input, DeserializationOption::NestingLimit(15));</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md32"></a>
v6.7.0-beta (2018-12-07)</h1>
<ul>
<li>Removed the automatic expansion of <code>DynamicJsonDocument</code>, it now has a fixed capacity.</li>
<li>Restored the monotonic allocator because the code was getting too big</li>
<li>Reduced the memory usage</li>
<li>Reduced the code size</li>
<li>Renamed <code>JsonKey</code> to <code>JsonString</code></li>
<li>Removed spurious files in the Particle library</li>
</ul>
<h1><a class="anchor" id="autotoc_md33"></a>
v6.6.0-beta (2018-11-13)</h1>
<ul>
<li>Removed <code>JsonArray::is&lt;T&gt;(i)</code> and <code>JsonArray::set(i,v)</code></li>
<li>Removed <code>JsonObject::is&lt;T&gt;(k)</code> and <code>JsonObject::set(k,v)</code></li>
<li>Replaced <code>T JsonArray::get&lt;T&gt;(i)</code> with <code>JsonVariant JsonArray::get(i)</code></li>
<li>Replaced <code>T JsonObject::get&lt;T&gt;(k)</code> with <code>JsonVariant JsonObject::get(k)</code></li>
<li>Added <code>JSON_STRING_SIZE()</code></li>
<li><strike>Replacing or removing a value now releases the memory</strike></li>
<li>Added <code>DeserializationError::code()</code> to be used in switch statements (issue #846)</li>
</ul>
<h1><a class="anchor" id="autotoc_md34"></a>
v6.5.0-beta (2018-10-13)</h1>
<ul>
<li>Added implicit conversion from <code>JsonArray</code> and <code>JsonObject</code> to <code>JsonVariant</code></li>
<li>Allow mixed configuration in compilation units (issue #809)</li>
<li>Fixed object keys not being duplicated</li>
<li><code>JsonPair::key()</code> now returns a <code>JsonKey</code></li>
<li>Increased the default capacity of <code>DynamicJsonDocument</code></li>
<li>Fixed <code>JsonVariant::is&lt;<a class="el" href="class_string.html">String</a>&gt;()</code> (closes #763)</li>
<li>Added <code>JsonArrayConst</code>, <code>JsonObjectConst</code>, and <code>JsonVariantConst</code></li>
<li>Added copy-constructor and copy-assignment-operator for <code>JsonDocument</code> (issue #827)</li>
</ul>
<h1><a class="anchor" id="autotoc_md35"></a>
v6.4.0-beta (2018-09-11)</h1>
<ul>
<li>Copy <code>JsonArray</code> and <code>JsonObject</code>, instead of storing pointers (issue #780)</li>
<li>Added <code>JsonVariant::to&lt;JsonArray&gt;()</code> and <code>JsonVariant::to&lt;JsonObject&gt;()</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md36"></a>
v6.3.0-beta (2018-08-31)</h1>
<ul>
<li>Implemented reference semantics for <code>JsonVariant</code></li>
<li>Replaced <code>JsonPair</code>'s <code>key</code> and <code>value</code> with <code>key()</code> and <code>value()</code></li>
<li>Fixed <code>serializeJson(obj[key], dst)</code> (issue #794)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md37"></a>
JsonVariant</h3>
<p><code>JsonVariant</code> now has a semantic similar to <code>JsonObject</code> and <code>JsonArray</code>. It's a reference to a value stored in the <code>JsonDocument</code>. As a consequence, a <code>JsonVariant</code> cannot be used as a standalone variable anymore.</p>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">JsonVariant myValue = 42;</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc;</div>
<div class="line">JsonVariant myValue = doc.to&lt;JsonVariant&gt;();</div>
<div class="line">myValue.set(42);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md38"></a>
JsonPair</h3>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">for(JsonPair p : myObject) {</div>
<div class="line">  Serial.println(p.key);</div>
<div class="line">  Serial.println(p.value.as&lt;int&gt;());</div>
<div class="line">}</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">for(JsonPair p : myObject) {</div>
<div class="line">  Serial.println(p.key());</div>
<div class="line">  Serial.println(p.value().as&lt;int&gt;());</div>
<div class="line">}</div>
</div><!-- fragment --><p>CAUTION: the key is now read only! </p>
<h1><a class="anchor" id="autotoc_md39"></a>
v6.2.3-beta (2018-07-19)</h1>
<ul>
<li>Fixed exception when using Flash strings as object keys (issue #784)</li>
</ul>
<h1><a class="anchor" id="autotoc_md40"></a>
v6.2.2-beta (2018-07-18)</h1>
<ul>
<li>Fixed &lsquo;invalid application of 'sizeof&rsquo; to incomplete type '__FlashStringHelper'<code>(issue #783)</code></li>
<li><code>Fixed</code>char[]<code>not duplicated when passed to</code>JsonVariant::operator[]`</li>
</ul>
<h1><a class="anchor" id="autotoc_md41"></a>
v6.2.1-beta (2018-07-17)</h1>
<ul>
<li>Fixed <code>JsonObject</code> not inserting keys of type <code><a class="el" href="class_string.html">String</a></code> (issue #782)</li>
</ul>
<h1><a class="anchor" id="autotoc_md42"></a>
v6.2.0-beta (2018-07-12)</h1>
<ul>
<li>Disabled lazy number deserialization (issue #772)</li>
<li>Fixed <code>JsonVariant::is&lt;int&gt;()</code> that returned true for empty strings</li>
<li>Improved float serialization when <code>-fsingle-precision-constant</code> is used</li>
<li>Renamed function <code>RawJson()</code> to <code>serialized()</code></li>
<li><code>serializeMsgPack()</code> now supports values marked with <code>serialized()</code></li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md43"></a>
Non quoted strings</h3>
<p>Non quoted strings are now forbidden in values, but they are still allowed in keys. For example, <code>{key:"value"}</code> is accepted, but <code>{key:value}</code> is not.</p>
<h3><a class="anchor" id="autotoc_md44"></a>
Preformatted values</h3>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">object[&quot;values&quot;] = RawJson(&quot;[1,2,3,4]&quot;);</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">object[&quot;values&quot;] = serialized(&quot;[1,2,3,4]&quot;);</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md45"></a>
v6.1.0-beta (2018-07-02)</h1>
<ul>
<li>Return <code>JsonArray</code> and <code>JsonObject</code> by value instead of reference (issue #309)</li>
<li>Replaced <code>success()</code> with <code>isNull()</code></li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">JsonObject&amp; obj = doc.to&lt;JsonObject&gt;();</div>
<div class="line">JsonArray&amp; arr = obj.createNestedArray(&quot;key&quot;);</div>
<div class="line">if (!arr.success()) {</div>
<div class="line">  Serial.println(&quot;Not enough memory&quot;);</div>
<div class="line">  return;</div>
<div class="line">}</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">JsonObject obj = doc.to&lt;JsonObject&gt;();</div>
<div class="line">JsonArray arr = obj.createNestedArray(&quot;key&quot;);</div>
<div class="line">if (arr.isNull()) {</div>
<div class="line">  Serial.println(&quot;Not enough memory&quot;);</div>
<div class="line">  return;</div>
<div class="line">}</div>
</div><!-- fragment --> </blockquote>
<h1><a class="anchor" id="autotoc_md46"></a>
v6.0.1-beta (2018-06-11)</h1>
<ul>
<li>Fixed conflicts with <code>isnan()</code> and <code>isinf()</code> macros (issue #752)</li>
</ul>
<h1><a class="anchor" id="autotoc_md47"></a>
v6.0.0-beta (2018-06-07)</h1>
<ul>
<li>Added <code>DynamicJsonDocument</code> and <code>StaticJsonDocument</code></li>
<li>Added <code>deserializeJson()</code></li>
<li>Added <code>serializeJson()</code> and <code>serializeJsonPretty()</code></li>
<li>Added <code>measureJson()</code> and <code>measureJsonPretty()</code></li>
<li>Added <code>serializeMsgPack()</code>, <code>deserializeMsgPack()</code> and <code>measureMsgPack()</code> (issue #358)</li>
<li>Added example <code>MsgPackParser.ino</code> (issue #358)</li>
<li>Added support for non zero-terminated strings (issue #704)</li>
<li>Removed <code>JsonBuffer::parseArray()</code>, <code>parseObject()</code> and <code>parse()</code></li>
<li>Removed <code>JsonBuffer::createArray()</code> and <code>createObject()</code></li>
<li>Removed <code>printTo()</code> and <code>prettyPrintTo()</code></li>
<li>Removed <code>measureLength()</code> and <code>measurePrettyLength()</code></li>
<li>Removed all deprecated features</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES</p>
<p></p>
</blockquote>
<h3><a class="anchor" id="autotoc_md48"></a>
Deserialization</h3>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonBuffer jb;</div>
<div class="line">JsonObject&amp; obj = jb.parseObject(json);</div>
<div class="line">if (obj.success()) {</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument doc;</div>
<div class="line">DeserializationError error = deserializeJson(doc, json);</div>
<div class="line">if (error) {</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line">JsonObject&amp; obj = doc.as&lt;JsonObject&gt;();</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md49"></a>
Serialization</h3>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonBuffer jb;</div>
<div class="line">JsonObject&amp; obj = jb.createObject();</div>
<div class="line">obj[&quot;key&quot;] = &quot;value&quot;;</div>
<div class="line">obj.printTo(Serial);</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">DynamicJsonDocument obj;</div>
<div class="line">JsonObject&amp; obj = doc.to&lt;JsonObject&gt;();</div>
<div class="line">obj[&quot;key&quot;] = &quot;value&quot;;</div>
<div class="line">serializeJson(doc, Serial);</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md50"></a>
v5.13.2</h1>
<ul>
<li>Fixed <code>JsonBuffer::parse()</code> not respecting nesting limit correctly (issue #693)</li>
<li>Fixed inconsistencies in nesting level counting (PR #695 from Zhenyu Wu)</li>
<li>Fixed null values that could be pass to <code>strcmp()</code> (PR #745 from Mike Karlesky)</li>
<li>Added macros <code>ARDUINOJSON_VERSION</code>, <code>ARDUINOJSON_VERSION_MAJOR</code>...</li>
</ul>
<h1><a class="anchor" id="autotoc_md51"></a>
v5.13.1</h1>
<ul>
<li>Fixed <code>JsonVariant::operator|(int)</code> that returned the default value if the variant contained a double (issue #675)</li>
<li>Allowed non-quoted key to contain underscores (issue #665)</li>
</ul>
<h1><a class="anchor" id="autotoc_md52"></a>
v5.13.0</h1>
<ul>
<li>Changed the rules of string duplication (issue #658)</li>
<li><code>RawJson()</code> accepts any kind of string and obeys to the same rules for duplication</li>
<li>Changed the return type of <code>strdup()</code> to <code>const char*</code> to prevent double duplication</li>
<li>Marked <code>strdup()</code> as deprecated</li>
</ul>
<blockquote class="doxtable">
<p>### New rules for string duplication</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">type   </th><th class="markdownTableHeadLeft">duplication    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">const char*   </td><td class="markdownTableBodyLeft">no    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">char*   </td><td class="markdownTableBodyLeft"><strike>no</strike> yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><a class="el" href="class_string.html">String</a>   </td><td class="markdownTableBodyLeft">yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">std::string   </td><td class="markdownTableBodyLeft">yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">const __FlashStringHelper*   </td><td class="markdownTableBodyLeft">yes   </td></tr>
</table>
<p>These new rules make <code>JsonBuffer::strdup()</code> useless. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md53"></a>
v5.12.0</h1>
<ul>
<li>Added <code>JsonVariant::operator|</code> to return a default value (see below)</li>
<li>Added a clear error message when compiled as C instead of C++ (issue #629)</li>
<li>Added detection of MPLAB XC compiler (issue #629)</li>
<li>Added detection of Keil ARM Compiler (issue #629)</li>
<li>Added an example that shows how to save and load a configuration file</li>
<li>Reworked all other examples</li>
</ul>
<blockquote class="doxtable">
<p>### How to use the new feature?</p>
<p>If you have a block like this:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">const char* ssid = root[&quot;ssid&quot;];</div>
<div class="line">if (!ssid)</div>
<div class="line">  ssid = &quot;default ssid&quot;;</div>
</div><!-- fragment --><p>You can simplify like that:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">const char* ssid = root[&quot;ssid&quot;] | &quot;default ssid&quot;;</div>
</div><!-- fragment --> </blockquote>
<h1><a class="anchor" id="autotoc_md54"></a>
v5.11.2</h1>
<ul>
<li>Fixed <code>DynamicJsonBuffer::clear()</code> not resetting allocation size (issue #561)</li>
<li>Fixed incorrect rounding for float values (issue #588)</li>
</ul>
<h1><a class="anchor" id="autotoc_md55"></a>
v5.11.1</h1>
<ul>
<li>Removed dependency on <code>PGM_P</code> as Particle 0.6.2 doesn't define it (issue #546)</li>
<li>Fixed warning "dereferencing type-punned pointer will break strict-aliasing rules [-Wstrict-aliasing]"</li>
<li>Fixed warning "floating constant exceeds range of 'float' [-Woverflow]" (issue #544)</li>
<li>Fixed warning "this statement may fall through" <a href="issue #539">-Wimplicit-fallthrough=</a></li>
<li>Removed <code>ARDUINOJSON_DOUBLE_IS_64BITS</code> as it became useless.</li>
<li>Fixed too many decimals places in float serialization (issue #543)</li>
</ul>
<h1><a class="anchor" id="autotoc_md56"></a>
v5.11.0</h1>
<ul>
<li>Made <code>JsonBuffer</code> non-copyable (PR #524 by @luisrayas3)</li>
<li>Added <code>StaticJsonBuffer::clear()</code></li>
<li>Added <code>DynamicJsonBuffer::clear()</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md57"></a>
v5.10.1</h1>
<ul>
<li>Fixed IntelliSense errors in Visual Micro (issue #483)</li>
<li>Fixed compilation in IAR Embedded Workbench (issue #515)</li>
<li>Fixed reading "true" as a float (issue #516)</li>
<li>Added <code>ARDUINOJSON_DOUBLE_IS_64BITS</code></li>
<li>Added <code>ARDUINOJSON_EMBEDDED_MODE</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md58"></a>
v5.10.0</h1>
<ul>
<li>Removed configurable number of decimal places (issues #288, #427 and #506)</li>
<li>Changed exponentiation thresholds to <code>1e7</code> and <code>1e-5</code> (issues #288, #427 and #506)</li>
<li><code>JsonVariant::is&lt;double&gt;()</code> now returns <code>true</code> for integers</li>
<li>Fixed error <code>IsBaseOf is not a member of ArduinoJson::TypeTraits</code> (issue #495)</li>
<li>Fixed error <code>forming reference to reference</code> (issue #495)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES :warning:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Old syntax   </th><th class="markdownTableHeadLeft">New syntax    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>double_with_n_digits(3.14, 2)</code>   </td><td class="markdownTableBodyLeft"><code>3.14</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>float_with_n_digits(3.14, 2)</code>   </td><td class="markdownTableBodyLeft"><code>3.14f</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>obj.set("key", 3.14, 2)</code>   </td><td class="markdownTableBodyLeft"><code>obj["key"] = 3.14</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>arr.add(3.14, 2)</code>   </td><td class="markdownTableBodyLeft"><code>arr.add(3.14)</code>   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Input   </th><th class="markdownTableHeadLeft">Old output   </th><th class="markdownTableHeadLeft">New output    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>3.14159</code>   </td><td class="markdownTableBodyLeft"><code>3.14</code>   </td><td class="markdownTableBodyLeft"><code>3.14159</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>42.0</code>   </td><td class="markdownTableBodyLeft"><code>42.00</code>   </td><td class="markdownTableBodyLeft"><code>42</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>0.0</code>   </td><td class="markdownTableBodyLeft"><code>0.00</code>   </td><td class="markdownTableBodyLeft"><code>0</code>   </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Expression   </th><th class="markdownTableHeadLeft">Old result   </th><th class="markdownTableHeadLeft">New result    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>JsonVariant(42).is&lt;int&gt;()</code>   </td><td class="markdownTableBodyLeft"><code>true</code>   </td><td class="markdownTableBodyLeft"><code>true</code>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft"><code>JsonVariant(42).is&lt;float&gt;()</code>   </td><td class="markdownTableBodyLeft"><code>false</code>   </td><td class="markdownTableBodyLeft"><code>true</code>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft"><code>JsonVariant(42).is&lt;double&gt;()</code>   </td><td class="markdownTableBodyLeft"><code>false</code>   </td><td class="markdownTableBodyLeft"><code>true</code>   </td></tr>
</table>
</blockquote>
<h1><a class="anchor" id="autotoc_md59"></a>
v5.9.0</h1>
<ul>
<li>Added <code>JsonArray::remove(iterator)</code> (issue #479)</li>
<li>Added <code>JsonObject::remove(iterator)</code></li>
<li>Renamed <code>JsonArray::removeAt(size_t)</code> into <code>remove(size_t)</code></li>
<li>Renamed folder <code>include/</code> to <code>src/</code></li>
<li>Fixed warnings <code>floating constant exceeds range of float</code>and <code>floating constant truncated to zero</code> (issue #483)</li>
<li>Removed <code>Print</code> class and converted <code>printTo()</code> to a template method (issue #276)</li>
<li>Removed example <code>IndentedPrintExample.ino</code></li>
<li>Now compatible with Particle 0.6.1, thanks to Jacob Nite (issue #294 and PR #461 by @foodbag)</li>
</ul>
<h1><a class="anchor" id="autotoc_md60"></a>
v5.8.4</h1>
<ul>
<li>Added custom implementation of <code>strtod()</code> (issue #453)</li>
<li>Added custom implementation of <code>strtol()</code> (issue #465)</li>
<li><code>char</code> is now treated as an integral type (issue #337, #370)</li>
</ul>
<h1><a class="anchor" id="autotoc_md61"></a>
v5.8.3</h1>
<ul>
<li>Fixed an access violation in <code>DynamicJsonBuffer</code> when memory allocation fails (issue #433)</li>
<li>Added operators <code>==</code> and <code>!=</code> for two <code>JsonVariant</code>s (issue #436)</li>
<li>Fixed <code>JsonVariant::operator[const FlashStringHelper*]</code> (issue #441)</li>
</ul>
<h1><a class="anchor" id="autotoc_md62"></a>
v5.8.2</h1>
<ul>
<li>Fixed parsing of comments (issue #421)</li>
<li>Fixed ignored <code><a class="el" href="struct_stream.html">Stream</a></code> timeout (issue #422)</li>
<li>Made sure we don't read more that necessary (issue #422)</li>
<li>Fixed error when the key of a <code>JsonObject</code> is a <code>char[]</code> (issue #423)</li>
<li>Reduced code size when using <code>const</code> references</li>
<li>Fixed error with string of type <code>unsigned char*</code> (issue #428)</li>
<li>Added <code>deprecated</code> attribute on <code>asArray()</code>, <code>asObject()</code> and <code>asString()</code> (issue #420)</li>
</ul>
<h1><a class="anchor" id="autotoc_md63"></a>
v5.8.1</h1>
<ul>
<li>Fixed error when assigning a <code>volatile int</code> to a <code>JsonVariant</code> (issue #415)</li>
<li>Fixed errors with Variable Length Arrays (issue #416)</li>
<li>Fixed error when both <code>ARDUINOJSON_ENABLE_STD_STREAM</code> and <code>ARDUINOJSON_ENABLE_ARDUINO_STREAM</code> are set to <code>1</code></li>
<li>Fixed error "Stream does not name a type" (issue #412)</li>
</ul>
<h1><a class="anchor" id="autotoc_md64"></a>
v5.8.0</h1>
<ul>
<li>Added operator <code>==</code> to compare <code>JsonVariant</code> and strings (issue #402)</li>
<li>Added support for <code><a class="el" href="struct_stream.html">Stream</a></code> (issue #300)</li>
<li>Reduced memory consumption by not duplicating spaces and comments</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES :warning:</p>
<p><code>JsonBuffer::parseObject()</code> and <code>JsonBuffer::parseArray()</code> have been pulled down to the derived classes <code>DynamicJsonBuffer</code> and <code>StaticJsonBufferBase</code>.</p>
<p>This means that if you have code like:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">void myFunction(JsonBuffer&amp; jsonBuffer);</div>
</div><!-- fragment --><p>you need to replace it with one of the following:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">void myFunction(DynamicJsonBuffer&amp; jsonBuffer);</div>
<div class="line">void myFunction(StaticJsonBufferBase&amp; jsonBuffer);</div>
<div class="line">template&lt;typename TJsonBuffer&gt; void myFunction(TJsonBuffer&amp; jsonBuffer);</div>
</div><!-- fragment --> </blockquote>
<h1><a class="anchor" id="autotoc_md65"></a>
v5.7.3</h1>
<ul>
<li>Added an <code>printTo(char[N])</code> and <code>prettyPrintTo(char[N])</code> (issue #292)</li>
<li>Added ability to set a nested value like this: <code>root["A"]["B"] = "C"</code> (issue #352)</li>
<li>Renamed <code>*.ipp</code> to <code>*Impl.hpp</code> because they were ignored by Arduino IDE (issue #396)</li>
</ul>
<h1><a class="anchor" id="autotoc_md66"></a>
v5.7.2</h1>
<ul>
<li>Made PROGMEM available on more platforms (issue #381)</li>
<li>Fixed PROGMEM causing an exception on ESP8266 (issue #383)</li>
</ul>
<h1><a class="anchor" id="autotoc_md67"></a>
v5.7.1</h1>
<ul>
<li>Added support for PROGMEM (issue #76)</li>
<li>Fixed compilation error when index is not an <code>int</code> (issue #381)</li>
</ul>
<h1><a class="anchor" id="autotoc_md68"></a>
v5.7.0</h1>
<ul>
<li>Templatized all functions using <code><a class="el" href="class_string.html">String</a></code> or <code>std::string</code></li>
<li>Removed <code>ArduinoJson::String</code></li>
<li>Removed <code>JsonVariant::defaultValue&lt;T&gt;()</code></li>
<li>Removed non-template <code>JsonObject::get()</code> and <code>JsonArray.get()</code></li>
<li>Fixed support for <code>StringSumHelper</code> (issue #184)</li>
<li>Replaced <code>ARDUINOJSON_USE_ARDUINO_STRING</code> by <code>ARDUINOJSON_ENABLE_STD_STRING</code> and <code>ARDUINOJSON_ENABLE_ARDUINO_STRING</code> (issue #378)</li>
<li>Added example <code>StringExample.ino</code> to show where <code><a class="el" href="class_string.html">String</a></code> can be used</li>
<li>Increased default nesting limit to 50 when compiled for a computer (issue #349)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES :warning:</p>
<p>The non-template functions <code>JsonObject::get()</code> and <code>JsonArray.get()</code> have been removed. This means that you need to explicitely tell the type you expect in return.</p>
<p>Old code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">#define ARDUINOJSON_USE_ARDUINO_STRING 0</div>
<div class="line">JsonVariant value1 = myObject.get(&quot;myKey&quot;);</div>
<div class="line">JsonVariant value2 = myArray.get(0);</div>
</div><!-- fragment --><p>New code:</p>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">#define ARDUINOJSON_ENABLE_ARDUINO_STRING 0</div>
<div class="line">#define ARDUINOJSON_ENABLE_STD_STRING 1</div>
<div class="line">JsonVariant value1 = myObject.get&lt;JsonVariant&gt;(&quot;myKey&quot;);</div>
<div class="line">JsonVariant value2 = myArray.get&lt;JsonVariant&gt;(0);</div>
</div><!-- fragment --> </blockquote>
<h1><a class="anchor" id="autotoc_md69"></a>
v5.6.7</h1>
<ul>
<li>Fixed <code>array[idx].as&lt;JsonVariant&gt;()</code> and <code>object[key].as&lt;JsonVariant&gt;()</code></li>
<li>Fixed return value of <code>JsonObject::set()</code> (issue #350)</li>
<li>Fixed undefined behavior in <code>Prettyfier</code> and <code>Print</code> (issue #354)</li>
<li>Fixed parser that incorrectly rejected floats containing a <code>+</code> (issue #349)</li>
</ul>
<h1><a class="anchor" id="autotoc_md70"></a>
v5.6.6</h1>
<ul>
<li>Fixed <code>-Wparentheses</code> warning introduced in v5.6.5 (PR #335 by @nuket)</li>
<li>Added <code>.mbedignore</code> for ARM mbdeb (PR #334 by @nuket)</li>
<li>Fixed <code>JsonVariant::success()</code> which didn't propagate <code>JsonArray::success()</code> nor <code>JsonObject::success()</code> (issue #342).</li>
</ul>
<h1><a class="anchor" id="autotoc_md71"></a>
v5.6.5</h1>
<ul>
<li><code>as&lt;char*&gt;()</code> now returns <code>true</code> when input is <code>null</code> (issue #330)</li>
</ul>
<h1><a class="anchor" id="autotoc_md72"></a>
v5.6.4</h1>
<ul>
<li>Fixed error in float serialization (issue #324)</li>
</ul>
<h1><a class="anchor" id="autotoc_md73"></a>
v5.6.3</h1>
<ul>
<li>Improved speed of float serialization (about twice faster)</li>
<li>Added <code>as&lt;JsonArray&gt;()</code> as a synonym for <code>as&lt;JsonArray&amp;&gt;()</code>... (issue #291)</li>
<li>Fixed <code>call of overloaded isinf(double&amp;) is ambiguous</code> (issue #284)</li>
</ul>
<h1><a class="anchor" id="autotoc_md74"></a>
v5.6.2</h1>
<ul>
<li>Fixed build when another lib does <code>#undef isnan</code> (issue #284)</li>
</ul>
<h1><a class="anchor" id="autotoc_md75"></a>
v5.6.1</h1>
<ul>
<li>Added missing <code>#pragma once</code> (issue #310)</li>
</ul>
<h1><a class="anchor" id="autotoc_md76"></a>
v5.6.0</h1>
<ul>
<li>ArduinoJson is now a header-only library (issue #199)</li>
</ul>
<h1><a class="anchor" id="autotoc_md77"></a>
v5.5.1</h1>
<ul>
<li>Fixed compilation error with Intel Galileo (issue #299)</li>
</ul>
<h1><a class="anchor" id="autotoc_md78"></a>
v5.5.0</h1>
<ul>
<li>Added <code>JsonVariant::success()</code> (issue #279)</li>
<li>Renamed <code>JsonVariant::invalid&lt;T&gt;()</code> to <code>JsonVariant::defaultValue&lt;T&gt;()</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md79"></a>
v5.4.0</h1>
<ul>
<li>Changed <code><a class="el" href="class_string.html">String</a></code> to <code>ArduinoJson::String</code> (issue #275)</li>
<li>Changed <code>::Print</code> to <code>ArduinoJson::Print</code> too</li>
</ul>
<h1><a class="anchor" id="autotoc_md80"></a>
v5.3.0</h1>
<ul>
<li>Added custom implementation of <code>ftoa</code> (issues #266, #267, #269 and #270)</li>
<li>Added <code>JsonVariant JsonBuffer::parse()</code> (issue #265)</li>
<li>Fixed <code>unsigned long</code> printed as <code>signed long</code> (issue #170)</li>
</ul>
<h1><a class="anchor" id="autotoc_md81"></a>
v5.2.0</h1>
<ul>
<li>Added <code>JsonVariant::as&lt;char*&gt;()</code> as a synonym for <code>JsonVariant::as&lt;const char*&gt;()</code> (issue #257)</li>
<li>Added example <code>JsonHttpClient</code> (issue #256)</li>
<li>Added <code>JsonArray::copyTo()</code> and <code>JsonArray::copyFrom()</code> (issue #254)</li>
<li>Added <code>RawJson()</code> to insert pregenerated JSON portions (issue #259)</li>
</ul>
<h1><a class="anchor" id="autotoc_md82"></a>
v5.1.1</h1>
<ul>
<li>Removed <code><a class="el" href="class_string.html">String</a></code> duplication when one replaces a value in a <code>JsonObject</code> (PR #232 by @ulion)</li>
</ul>
<h1><a class="anchor" id="autotoc_md83"></a>
v5.1.0</h1>
<ul>
<li>Added support of <code>long long</code> (issue #171)</li>
<li>Moved all build settings to <code><a class="el" href="_configuration_8hpp_source.html">ArduinoJson/Configuration.hpp</a></code></li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGE :warning:</p>
<p>If you defined <code>ARDUINOJSON_ENABLE_STD_STREAM</code>, you now need to define it to <code>1</code>. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md84"></a>
v5.0.8</h1>
<ul>
<li>Made the library compatible with <a href="http://platformio.org/">PlatformIO</a> (issue #181)</li>
<li>Fixed <code>JsonVariant::is&lt;bool&gt;()</code> that was incorrectly returning false (issue #214)</li>
</ul>
<h1><a class="anchor" id="autotoc_md85"></a>
v5.0.7</h1>
<ul>
<li>Made library easier to use from a CMake project: simply <code>add_subdirectory(ArduinoJson/src)</code></li>
<li>Changed <code><a class="el" href="class_string.html">String</a></code> to be a <code>typedef</code> of <code>std::string</code> (issues #142 and #161)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES :warning:</p>
<ul>
<li><code>JsonVariant(true).as&lt;<a class="el" href="class_string.html">String</a>&gt;()</code> now returns <code>"true"</code> instead of <code>"1"</code></li>
<li><code>JsonVariant(false).as&lt;<a class="el" href="class_string.html">String</a>&gt;()</code> now returns <code>"false"</code> instead of <code>"0"</code> </li>
</ul>
</blockquote>
<h1><a class="anchor" id="autotoc_md86"></a>
v5.0.6</h1>
<ul>
<li>Added parameter to <code>DynamicJsonBuffer</code> constructor to set initial size (issue #152)</li>
<li>Fixed warning about library category in Arduino 1.6.6 (issue #147)</li>
<li>Examples: Added a loop to wait for serial port to be ready (issue #156)</li>
</ul>
<h1><a class="anchor" id="autotoc_md87"></a>
v5.0.5</h1>
<ul>
<li>Added overload <code>JsonObjectSuscript::set(value, decimals)</code> (issue #143)</li>
<li>Use <code>float</code> instead of <code>double</code> to reduce the size of <code>JsonVariant</code> (issue #134)</li>
</ul>
<h1><a class="anchor" id="autotoc_md88"></a>
v5.0.4</h1>
<ul>
<li>Fixed ambiguous overload with <code>JsonArraySubscript</code> and <code>JsonObjectSubscript</code> (issue #122)</li>
</ul>
<h1><a class="anchor" id="autotoc_md89"></a>
v5.0.3</h1>
<ul>
<li>Fixed <code>printTo(String)</code> which wrote numbers instead of strings (issue #120)</li>
<li>Fixed return type of <code>JsonArray::is&lt;T&gt;()</code> and some others (issue #121)</li>
</ul>
<h1><a class="anchor" id="autotoc_md90"></a>
v5.0.2</h1>
<ul>
<li>Fixed segmentation fault in <code>parseObject(String)</code> and <code>parseArray(String)</code>, when the <code>StaticJsonBuffer</code> is too small to hold a copy of the string</li>
<li>Fixed Clang warning "register specifier is deprecated" (issue #102)</li>
<li>Fixed GCC warning "declaration shadows a member" (issue #103)</li>
<li>Fixed memory alignment, which made ESP8266 crash (issue #104)</li>
<li>Fixed compilation on Visual Studio 2010 and 2012 (issue #107)</li>
</ul>
<h1><a class="anchor" id="autotoc_md91"></a>
v5.0.1</h1>
<ul>
<li>Fixed compilation with Arduino 1.0.6 (issue #99)</li>
</ul>
<h1><a class="anchor" id="autotoc_md92"></a>
v5.0.0</h1>
<ul>
<li>Added support of <code><a class="el" href="class_string.html">String</a></code> class (issues #55, #56, #70, #77)</li>
<li>Added <code>JsonBuffer::strdup()</code> to make a copy of a string (issues #10, #57)</li>
<li>Implicitly call <code>strdup()</code> for <code><a class="el" href="class_string.html">String</a></code> but not for <code>char*</code> (issues #84, #87)</li>
<li>Added support of non standard JSON input (issue #44)</li>
<li>Added support of comments in JSON input (issue #88)</li>
<li>Added implicit cast between numerical types (issues #64, #69, #93)</li>
<li>Added ability to read number values as string (issue #90)</li>
<li>Redesigned <code>JsonVariant</code> to leverage converting constructors instead of assignment operators (issue #66)</li>
<li>Switched to new the library layout (requires Arduino 1.0.6 or above)</li>
</ul>
<blockquote class="doxtable">
<p>### BREAKING CHANGES :warning:</p>
<ul>
<li><code>JsonObject::add()</code> was renamed to <code>set()</code></li>
<li><code>JsonArray::at()</code> and <code>JsonObject::at()</code> were renamed to <code>get()</code></li>
<li>Number of digits of floating point value are now set with <code>double_with_n_digits()</code> </li>
</ul>
</blockquote>
<p><b>Personal note about the <code><a class="el" href="class_string.html">String</a></code> class</b>: Support of the <code><a class="el" href="class_string.html">String</a></code> class has been added to the library because many people use it in their programs. However, you should not see this as an invitation to use the <code><a class="el" href="class_string.html">String</a></code> class. The <code><a class="el" href="class_string.html">String</a></code> class is <b>bad</b> because it uses dynamic memory allocation. Compared to static allocation, it compiles to a bigger, slower program, and is less predictable. You certainly don't want that in an embedded environment! </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
