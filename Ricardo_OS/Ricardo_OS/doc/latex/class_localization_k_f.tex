\hypertarget{class_localization_k_f}{}\doxysection{Localization\+KF Class Reference}
\label{class_localization_k_f}\index{LocalizationKF@{LocalizationKF}}


{\ttfamily \#include $<$localizationkf.\+h$>$}



Collaboration diagram for Localization\+KF\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_localization_k_f_a00c8619f7487ed4e20616698f2e440fb}{Localization\+KF}} (\mbox{\hyperlink{class_log_controller}{Log\+Controller}} \&logcontroller)
\item 
void \mbox{\hyperlink{class_localization_k_f_a2873598a8af341b4086be8effdd5dc65}{setup}} ()
\begin{DoxyCompactList}\small\item\em Initialize Filter. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_localization_k_f_a0b45816094a37dab54f6ff4ebc13d2a9}{predict}} (const Eigen\+::\+Vector3f \&linear\+\_\+acceleration, float dt)
\begin{DoxyCompactList}\small\item\em Propagate state transition. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_localization_k_f_a9c00a0487100e98134ddaf123318d70b}{gps\+Update}} (const long lat, const long lng, const long alt, const long vn, const long ve, const long vd)
\begin{DoxyCompactList}\small\item\em Add new gps measurement to position estimate. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_localization_k_f_abb29471220060409d6bff22b2ba4b08e}{baro\+Update}} ()
\begin{DoxyCompactList}\small\item\em Add new baro measurement to position estimate. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_localization_k_f_a4fdb1020f368ef41448fe02008ada591}{update\+GPSReference}} (const long lat, const long lng, const long alt)
\begin{DoxyCompactList}\small\item\em update the reference gps coordinates (the launch site) \end{DoxyCompactList}\item 
Eigen\+::\+Vector3f \mbox{\hyperlink{class_localization_k_f_a272e86466a5c0ddf1dffa21e1c007e8b}{get\+Position}} ()
\begin{DoxyCompactList}\small\item\em Get the Position vector (Pn, Pe, Pd) \end{DoxyCompactList}\item 
Eigen\+::\+Vector3f \mbox{\hyperlink{class_localization_k_f_a8c6712f8416e09a15f487805f750bb32}{get\+Velocity}} ()
\begin{DoxyCompactList}\small\item\em Get the Velocity vector (Vn, Ve, Vd) \end{DoxyCompactList}\item 
Eigen\+::\+Vector3f \mbox{\hyperlink{class_localization_k_f_adc53430b2dec651ae367cf7176b256ef}{GPSto\+NED}} (const long lat, const long lng, const long alt)
\begin{DoxyCompactList}\small\item\em Get the relative NED coordinates from the reference point in m. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
enum class \mbox{\hyperlink{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804a}{STATE}} \+: uint8\+\_\+t \{ \newline
\mbox{\hyperlink{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa99a0dd53807a1637c9444a067c6a6be7}{Pn}}
, \mbox{\hyperlink{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa579951efc1d928e2f1cf6c51e193e899}{Vn}}
, \mbox{\hyperlink{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aaefa6bbcc81e1c9c099a2b741ce910860}{Pe}}
, \mbox{\hyperlink{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa421bcab9679295d92772dacc7996f425}{Ve}}
, \newline
\mbox{\hyperlink{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa70c62818a3aed8e80d799f643acf98b2}{Pd}}
, \mbox{\hyperlink{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aae8ed9f9ea72e4c6d128c1aefd4c13617}{Vd}}
 \}
\begin{DoxyCompactList}\small\item\em Enum containing indicies of state variables. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
Eigen\+::\+Vector3f \mbox{\hyperlink{class_localization_k_f_aaa14cdfb2ff3eabba986b45ef2bc3df4}{GPSto\+ECEF}} (const long lat, const long lng, const long alt)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_log_controller}{Log\+Controller}} \& \mbox{\hyperlink{class_localization_k_f_ae8767d637d3d0ceb34474760653641c0}{\+\_\+logcontroller}}
\item 
Eigen\+::\+Vector$<$ float, 6 $>$ \mbox{\hyperlink{class_localization_k_f_af5fdcbe03ae1416251f8e8b866267f46}{X}} = Eigen\+::\+Vector$<$float,6$>$\+::Zero()
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_state}{State}} variable \mbox{[}pn, vn, pe, ve, pd, vd\mbox{]}. \end{DoxyCompactList}\item 
Eigen\+::\+Matrix$<$ float, 6, 6 $>$ \mbox{\hyperlink{class_localization_k_f_ac531224a8e15ef47188438aa52d4ddda}{P}}
\begin{DoxyCompactList}\small\item\em \mbox{\hyperlink{class_state}{State}} Covariance Matrix. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{class_localization_k_f_a81c1b93aa144a3672ec8d4adb8297ca6}{accel\+Variance}} = 0.\+1
\item 
const float \mbox{\hyperlink{class_localization_k_f_a144dc3e1f4b758d211cf721eb01c4bab}{gps\+Position\+Variance}} = 2.\+123
\begin{DoxyCompactList}\small\item\em Gps position variance given by the CEP $\sim$ 2.\+5m. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{class_localization_k_f_aadf6881e8e0d13e4f3dde540eafedd0d}{gps\+Altitude\+Variance}} = 2.\+123
\begin{DoxyCompactList}\small\item\em Gps \mbox{\hyperlink{class_altitude}{Altitude}} variance differs from horizontal variance but for now assume its the same. This is in m. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{class_localization_k_f_a9586a554a8b2997164b7ba6392f2e741}{gps\+Velocity\+Variance}} = 0.\+00557
\begin{DoxyCompactList}\small\item\em Gps velocity variance given as +-\/ 0.\+05ms-\/1 @ 50\%. \end{DoxyCompactList}\item 
const Eigen\+::\+Diagonal\+Matrix$<$ float, 6 $>$ \mbox{\hyperlink{class_localization_k_f_a9326f0b3e89d8b1bb488cdb276e2e2c1}{R\+\_\+\+GPS}}
\begin{DoxyCompactList}\small\item\em Covaraince Matrix for the \mbox{\hyperlink{class_g_p_s}{GPS}} measurements. We assume the variance is constant here where the position variance is given by the CEP and and velocity by the velocity accuracy in the ublox specifications. This is a bold assumption and will likely be changed later when we have more time. Further we assume no covaraince between the measurement as we cannot estimate this. \end{DoxyCompactList}\item 
const float \mbox{\hyperlink{class_localization_k_f_a5e2d855e4fe02da773e112802cbb510a}{baro\+Variance}} = 0
\item 
Eigen\+::\+Vector3f \mbox{\hyperlink{class_localization_k_f_ad25c534c8ff0282051fa1ef7c88a3ead}{\+\_\+gps\+Reference\+ECEF}} = Eigen\+::\+Vector3f\+::\+Zero()
\item 
float \mbox{\hyperlink{class_localization_k_f_a4c5b4e1291804ceffae33d361bf6b832}{\+\_\+gps\+Reference\+SLat}}
\item 
float \mbox{\hyperlink{class_localization_k_f_a34cc04ea591de2e15c4d927dd74ac277}{\+\_\+gps\+Reference\+CLat}}
\item 
float \mbox{\hyperlink{class_localization_k_f_a8681c82b46ca0c53b831f1072b2c6c83}{\+\_\+gps\+Reference\+SLng}}
\item 
float \mbox{\hyperlink{class_localization_k_f_a46f27483d4da359a2f476c192973c911}{\+\_\+gps\+Reference\+CLng}}
\item 
const float \mbox{\hyperlink{class_localization_k_f_a380842c73db643f55304c33915b24f3e}{earth\+Major\+Axis}} = 6378137
\item 
const float \mbox{\hyperlink{class_localization_k_f_aaac95965acaf4eb085671aaf47536839}{earth\+Eccentricity2}} = 0.\+00669437999014
\item 
const float \mbox{\hyperlink{class_localization_k_f_aadafda534f1643df0a4c10f84c420c87}{degtorad}} = 0.\+01745329251
\end{DoxyCompactItemize}


\doxysubsection{Member Enumeration Documentation}
\mbox{\Hypertarget{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804a}\label{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804a}} 
\index{LocalizationKF@{LocalizationKF}!STATE@{STATE}}
\index{STATE@{STATE}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{STATE}{STATE}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804a}{Localization\+KF\+::\+STATE}} \+: uint8\+\_\+t\hspace{0.3cm}{\ttfamily [strong]}, {\ttfamily [private]}}



Enum containing indicies of state variables. 

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{Pn@{Pn}!LocalizationKF@{LocalizationKF}}\index{LocalizationKF@{LocalizationKF}!Pn@{Pn}}}\mbox{\Hypertarget{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa99a0dd53807a1637c9444a067c6a6be7}\label{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa99a0dd53807a1637c9444a067c6a6be7}} 
Pn&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Vn@{Vn}!LocalizationKF@{LocalizationKF}}\index{LocalizationKF@{LocalizationKF}!Vn@{Vn}}}\mbox{\Hypertarget{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa579951efc1d928e2f1cf6c51e193e899}\label{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa579951efc1d928e2f1cf6c51e193e899}} 
Vn&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Pe@{Pe}!LocalizationKF@{LocalizationKF}}\index{LocalizationKF@{LocalizationKF}!Pe@{Pe}}}\mbox{\Hypertarget{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aaefa6bbcc81e1c9c099a2b741ce910860}\label{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aaefa6bbcc81e1c9c099a2b741ce910860}} 
Pe&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Ve@{Ve}!LocalizationKF@{LocalizationKF}}\index{LocalizationKF@{LocalizationKF}!Ve@{Ve}}}\mbox{\Hypertarget{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa421bcab9679295d92772dacc7996f425}\label{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa421bcab9679295d92772dacc7996f425}} 
Ve&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Pd@{Pd}!LocalizationKF@{LocalizationKF}}\index{LocalizationKF@{LocalizationKF}!Pd@{Pd}}}\mbox{\Hypertarget{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa70c62818a3aed8e80d799f643acf98b2}\label{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aa70c62818a3aed8e80d799f643acf98b2}} 
Pd&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{Vd@{Vd}!LocalizationKF@{LocalizationKF}}\index{LocalizationKF@{LocalizationKF}!Vd@{Vd}}}\mbox{\Hypertarget{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aae8ed9f9ea72e4c6d128c1aefd4c13617}\label{class_localization_k_f_a918865a864705c58ca9ad5e9ebef804aae8ed9f9ea72e4c6d128c1aefd4c13617}} 
Vd&\\
\hline

\end{DoxyEnumFields}


\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_localization_k_f_a00c8619f7487ed4e20616698f2e440fb}\label{class_localization_k_f_a00c8619f7487ed4e20616698f2e440fb}} 
\index{LocalizationKF@{LocalizationKF}!LocalizationKF@{LocalizationKF}}
\index{LocalizationKF@{LocalizationKF}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{LocalizationKF()}{LocalizationKF()}}
{\footnotesize\ttfamily Localization\+KF\+::\+Localization\+KF (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_log_controller}{Log\+Controller}} \&}]{logcontroller }\end{DoxyParamCaption})}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_localization_k_f_abb29471220060409d6bff22b2ba4b08e}\label{class_localization_k_f_abb29471220060409d6bff22b2ba4b08e}} 
\index{LocalizationKF@{LocalizationKF}!baroUpdate@{baroUpdate}}
\index{baroUpdate@{baroUpdate}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{baroUpdate()}{baroUpdate()}}
{\footnotesize\ttfamily void Localization\+KF\+::baro\+Update (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Add new baro measurement to position estimate. 

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_abb29471220060409d6bff22b2ba4b08e_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_localization_k_f_a272e86466a5c0ddf1dffa21e1c007e8b}\label{class_localization_k_f_a272e86466a5c0ddf1dffa21e1c007e8b}} 
\index{LocalizationKF@{LocalizationKF}!getPosition@{getPosition}}
\index{getPosition@{getPosition}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{getPosition()}{getPosition()}}
{\footnotesize\ttfamily Eigen\+::\+Vector3f Localization\+KF\+::get\+Position (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Get the Position vector (Pn, Pe, Pd) 

\begin{DoxyReturn}{Returns}
Eigen\+::\+Vector3f 
\end{DoxyReturn}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_a272e86466a5c0ddf1dffa21e1c007e8b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_localization_k_f_a8c6712f8416e09a15f487805f750bb32}\label{class_localization_k_f_a8c6712f8416e09a15f487805f750bb32}} 
\index{LocalizationKF@{LocalizationKF}!getVelocity@{getVelocity}}
\index{getVelocity@{getVelocity}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{getVelocity()}{getVelocity()}}
{\footnotesize\ttfamily Eigen\+::\+Vector3f Localization\+KF\+::get\+Velocity (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Get the Velocity vector (Vn, Ve, Vd) 

\begin{DoxyReturn}{Returns}
Eigen\+::\+Vector3f 
\end{DoxyReturn}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_a8c6712f8416e09a15f487805f750bb32_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_localization_k_f_aaa14cdfb2ff3eabba986b45ef2bc3df4}\label{class_localization_k_f_aaa14cdfb2ff3eabba986b45ef2bc3df4}} 
\index{LocalizationKF@{LocalizationKF}!GPStoECEF@{GPStoECEF}}
\index{GPStoECEF@{GPStoECEF}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{GPStoECEF()}{GPStoECEF()}}
{\footnotesize\ttfamily Eigen\+::\+Vector3f Localization\+KF\+::\+GPSto\+ECEF (\begin{DoxyParamCaption}\item[{const long}]{lat,  }\item[{const long}]{lng,  }\item[{const long}]{alt }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_aaa14cdfb2ff3eabba986b45ef2bc3df4_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_localization_k_f_adc53430b2dec651ae367cf7176b256ef}\label{class_localization_k_f_adc53430b2dec651ae367cf7176b256ef}} 
\index{LocalizationKF@{LocalizationKF}!GPStoNED@{GPStoNED}}
\index{GPStoNED@{GPStoNED}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{GPStoNED()}{GPStoNED()}}
{\footnotesize\ttfamily Eigen\+::\+Vector3f Localization\+KF\+::\+GPSto\+NED (\begin{DoxyParamCaption}\item[{const long}]{lat,  }\item[{const long}]{lng,  }\item[{const long}]{alt }\end{DoxyParamCaption})}



Get the relative NED coordinates from the reference point in m. 


\begin{DoxyParams}{Parameters}
{\em lat} & Latitude in degrees \\
\hline
{\em lng} & Longitude in degrees \\
\hline
{\em alt} & \mbox{\hyperlink{class_altitude}{Altitude}} in mm \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Eigen\+::\+Vector3f 
\end{DoxyReturn}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_adc53430b2dec651ae367cf7176b256ef_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_adc53430b2dec651ae367cf7176b256ef_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_localization_k_f_a9c00a0487100e98134ddaf123318d70b}\label{class_localization_k_f_a9c00a0487100e98134ddaf123318d70b}} 
\index{LocalizationKF@{LocalizationKF}!gpsUpdate@{gpsUpdate}}
\index{gpsUpdate@{gpsUpdate}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{gpsUpdate()}{gpsUpdate()}}
{\footnotesize\ttfamily void Localization\+KF\+::gps\+Update (\begin{DoxyParamCaption}\item[{const long}]{lat,  }\item[{const long}]{lng,  }\item[{const long}]{alt,  }\item[{const long}]{vn,  }\item[{const long}]{ve,  }\item[{const long}]{vd }\end{DoxyParamCaption})}



Add new gps measurement to position estimate. 

System Uncertainty\+: S=HP\+\_\+barH\textquotesingle{}+R\+\_\+gps as H is the identiy matrix\+: S=P\+\_\+bar+\+R\+\_\+gps

Kalman Gain\+: K=P\+\_\+barH\textquotesingle{}S$^\wedge$-\/1 Again as H is the identiy matrix\+: K=P\+\_\+bar\+S$^\wedge$-\/1

K=P\+\_\+bar(P\+\_\+bar+\+R\+\_\+gps)$^\wedge$-\/1

residual y=z−\+HX

state update x = x + Ky

Covariance update P = (I-\/\+KH)P\+\_\+bar -\/$>$ unstable numerically Alternate Form P = (I−\+KH)P(I−\+KH)\textquotesingle{}+KRK\textquotesingle{} Noting that H\+\_\+gps is the identity matrix we get P = (I-\/K)P(I-\/K)\textquotesingle{}+KRK\textquotesingle{}


\begin{DoxyParams}{Parameters}
{\em lat} & \mbox{\hyperlink{class_g_p_s}{GPS}} Latitude (deg), WGS84 geodetic coordinates \\
\hline
{\em lng} & \mbox{\hyperlink{class_g_p_s}{GPS}} Longitude (deg), WGS84 geodetic coordinates \\
\hline
{\em alt} & \mbox{\hyperlink{class_g_p_s}{GPS}} Alttude (mm) \\
\hline
{\em vn} & NORTH velocity (m/s) \\
\hline
{\em ve} & EAST velocity (m/s) \\
\hline
{\em vd} & DOWN velocity (m/s) \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_a9c00a0487100e98134ddaf123318d70b_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_a9c00a0487100e98134ddaf123318d70b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_localization_k_f_a0b45816094a37dab54f6ff4ebc13d2a9}\label{class_localization_k_f_a0b45816094a37dab54f6ff4ebc13d2a9}} 
\index{LocalizationKF@{LocalizationKF}!predict@{predict}}
\index{predict@{predict}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{predict()}{predict()}}
{\footnotesize\ttfamily void Localization\+KF\+::predict (\begin{DoxyParamCaption}\item[{const Eigen\+::\+Vector3f \&}]{linear\+\_\+acceleration,  }\item[{float}]{dt }\end{DoxyParamCaption})}



Propagate state transition. 

x=Ax+\+Bu P\+\_\+bar=APA\textquotesingle{}+Q


\begin{DoxyParams}{Parameters}
{\em linear\+\_\+acceleration} & \mbox{\hyperlink{class_acceleration}{Acceleration}} (ms-\/2) in NED frame with gravtiy removed \\
\hline
{\em dt} & time step \\
\hline
\end{DoxyParams}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_a0b45816094a37dab54f6ff4ebc13d2a9_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_localization_k_f_a2873598a8af341b4086be8effdd5dc65}\label{class_localization_k_f_a2873598a8af341b4086be8effdd5dc65}} 
\index{LocalizationKF@{LocalizationKF}!setup@{setup}}
\index{setup@{setup}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{setup()}{setup()}}
{\footnotesize\ttfamily void Localization\+KF\+::setup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Initialize Filter. 

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_a2873598a8af341b4086be8effdd5dc65_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{class_localization_k_f_a4fdb1020f368ef41448fe02008ada591}\label{class_localization_k_f_a4fdb1020f368ef41448fe02008ada591}} 
\index{LocalizationKF@{LocalizationKF}!updateGPSReference@{updateGPSReference}}
\index{updateGPSReference@{updateGPSReference}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{updateGPSReference()}{updateGPSReference()}}
{\footnotesize\ttfamily void Localization\+KF\+::update\+GPSReference (\begin{DoxyParamCaption}\item[{const long}]{lat,  }\item[{const long}]{lng,  }\item[{const long}]{alt }\end{DoxyParamCaption})}



update the reference gps coordinates (the launch site) 


\begin{DoxyParams}{Parameters}
{\em lat} & \\
\hline
{\em lng} & \\
\hline
{\em alt} & \\
\hline
\end{DoxyParams}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_a4fdb1020f368ef41448fe02008ada591_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_localization_k_f_a4fdb1020f368ef41448fe02008ada591_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_localization_k_f_a34cc04ea591de2e15c4d927dd74ac277}\label{class_localization_k_f_a34cc04ea591de2e15c4d927dd74ac277}} 
\index{LocalizationKF@{LocalizationKF}!\_gpsReferenceCLat@{\_gpsReferenceCLat}}
\index{\_gpsReferenceCLat@{\_gpsReferenceCLat}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{\_gpsReferenceCLat}{\_gpsReferenceCLat}}
{\footnotesize\ttfamily float Localization\+KF\+::\+\_\+gps\+Reference\+CLat\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_a46f27483d4da359a2f476c192973c911}\label{class_localization_k_f_a46f27483d4da359a2f476c192973c911}} 
\index{LocalizationKF@{LocalizationKF}!\_gpsReferenceCLng@{\_gpsReferenceCLng}}
\index{\_gpsReferenceCLng@{\_gpsReferenceCLng}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{\_gpsReferenceCLng}{\_gpsReferenceCLng}}
{\footnotesize\ttfamily float Localization\+KF\+::\+\_\+gps\+Reference\+CLng\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_ad25c534c8ff0282051fa1ef7c88a3ead}\label{class_localization_k_f_ad25c534c8ff0282051fa1ef7c88a3ead}} 
\index{LocalizationKF@{LocalizationKF}!\_gpsReferenceECEF@{\_gpsReferenceECEF}}
\index{\_gpsReferenceECEF@{\_gpsReferenceECEF}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{\_gpsReferenceECEF}{\_gpsReferenceECEF}}
{\footnotesize\ttfamily Eigen\+::\+Vector3f Localization\+KF\+::\+\_\+gps\+Reference\+ECEF = Eigen\+::\+Vector3f\+::\+Zero()\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_a4c5b4e1291804ceffae33d361bf6b832}\label{class_localization_k_f_a4c5b4e1291804ceffae33d361bf6b832}} 
\index{LocalizationKF@{LocalizationKF}!\_gpsReferenceSLat@{\_gpsReferenceSLat}}
\index{\_gpsReferenceSLat@{\_gpsReferenceSLat}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{\_gpsReferenceSLat}{\_gpsReferenceSLat}}
{\footnotesize\ttfamily float Localization\+KF\+::\+\_\+gps\+Reference\+SLat\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_a8681c82b46ca0c53b831f1072b2c6c83}\label{class_localization_k_f_a8681c82b46ca0c53b831f1072b2c6c83}} 
\index{LocalizationKF@{LocalizationKF}!\_gpsReferenceSLng@{\_gpsReferenceSLng}}
\index{\_gpsReferenceSLng@{\_gpsReferenceSLng}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{\_gpsReferenceSLng}{\_gpsReferenceSLng}}
{\footnotesize\ttfamily float Localization\+KF\+::\+\_\+gps\+Reference\+SLng\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_ae8767d637d3d0ceb34474760653641c0}\label{class_localization_k_f_ae8767d637d3d0ceb34474760653641c0}} 
\index{LocalizationKF@{LocalizationKF}!\_logcontroller@{\_logcontroller}}
\index{\_logcontroller@{\_logcontroller}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{\_logcontroller}{\_logcontroller}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_log_controller}{Log\+Controller}}\& Localization\+KF\+::\+\_\+logcontroller\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_a81c1b93aa144a3672ec8d4adb8297ca6}\label{class_localization_k_f_a81c1b93aa144a3672ec8d4adb8297ca6}} 
\index{LocalizationKF@{LocalizationKF}!accelVariance@{accelVariance}}
\index{accelVariance@{accelVariance}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{accelVariance}{accelVariance}}
{\footnotesize\ttfamily const float Localization\+KF\+::accel\+Variance = 0.\+1\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_a5e2d855e4fe02da773e112802cbb510a}\label{class_localization_k_f_a5e2d855e4fe02da773e112802cbb510a}} 
\index{LocalizationKF@{LocalizationKF}!baroVariance@{baroVariance}}
\index{baroVariance@{baroVariance}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{baroVariance}{baroVariance}}
{\footnotesize\ttfamily const float Localization\+KF\+::baro\+Variance = 0\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_aadafda534f1643df0a4c10f84c420c87}\label{class_localization_k_f_aadafda534f1643df0a4c10f84c420c87}} 
\index{LocalizationKF@{LocalizationKF}!degtorad@{degtorad}}
\index{degtorad@{degtorad}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{degtorad}{degtorad}}
{\footnotesize\ttfamily const float Localization\+KF\+::degtorad = 0.\+01745329251\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_aaac95965acaf4eb085671aaf47536839}\label{class_localization_k_f_aaac95965acaf4eb085671aaf47536839}} 
\index{LocalizationKF@{LocalizationKF}!earthEccentricity2@{earthEccentricity2}}
\index{earthEccentricity2@{earthEccentricity2}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{earthEccentricity2}{earthEccentricity2}}
{\footnotesize\ttfamily const float Localization\+KF\+::earth\+Eccentricity2 = 0.\+00669437999014\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_a380842c73db643f55304c33915b24f3e}\label{class_localization_k_f_a380842c73db643f55304c33915b24f3e}} 
\index{LocalizationKF@{LocalizationKF}!earthMajorAxis@{earthMajorAxis}}
\index{earthMajorAxis@{earthMajorAxis}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{earthMajorAxis}{earthMajorAxis}}
{\footnotesize\ttfamily const float Localization\+KF\+::earth\+Major\+Axis = 6378137\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{class_localization_k_f_aadf6881e8e0d13e4f3dde540eafedd0d}\label{class_localization_k_f_aadf6881e8e0d13e4f3dde540eafedd0d}} 
\index{LocalizationKF@{LocalizationKF}!gpsAltitudeVariance@{gpsAltitudeVariance}}
\index{gpsAltitudeVariance@{gpsAltitudeVariance}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{gpsAltitudeVariance}{gpsAltitudeVariance}}
{\footnotesize\ttfamily const float Localization\+KF\+::gps\+Altitude\+Variance = 2.\+123\hspace{0.3cm}{\ttfamily [private]}}



Gps \mbox{\hyperlink{class_altitude}{Altitude}} variance differs from horizontal variance but for now assume its the same. This is in m. 

\mbox{\Hypertarget{class_localization_k_f_a144dc3e1f4b758d211cf721eb01c4bab}\label{class_localization_k_f_a144dc3e1f4b758d211cf721eb01c4bab}} 
\index{LocalizationKF@{LocalizationKF}!gpsPositionVariance@{gpsPositionVariance}}
\index{gpsPositionVariance@{gpsPositionVariance}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{gpsPositionVariance}{gpsPositionVariance}}
{\footnotesize\ttfamily const float Localization\+KF\+::gps\+Position\+Variance = 2.\+123\hspace{0.3cm}{\ttfamily [private]}}



Gps position variance given by the CEP $\sim$ 2.\+5m. 

\mbox{\Hypertarget{class_localization_k_f_a9586a554a8b2997164b7ba6392f2e741}\label{class_localization_k_f_a9586a554a8b2997164b7ba6392f2e741}} 
\index{LocalizationKF@{LocalizationKF}!gpsVelocityVariance@{gpsVelocityVariance}}
\index{gpsVelocityVariance@{gpsVelocityVariance}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{gpsVelocityVariance}{gpsVelocityVariance}}
{\footnotesize\ttfamily const float Localization\+KF\+::gps\+Velocity\+Variance = 0.\+00557\hspace{0.3cm}{\ttfamily [private]}}



Gps velocity variance given as +-\/ 0.\+05ms-\/1 @ 50\%. 

\mbox{\Hypertarget{class_localization_k_f_ac531224a8e15ef47188438aa52d4ddda}\label{class_localization_k_f_ac531224a8e15ef47188438aa52d4ddda}} 
\index{LocalizationKF@{LocalizationKF}!P@{P}}
\index{P@{P}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{P}{P}}
{\footnotesize\ttfamily Eigen\+::\+Matrix$<$float,6,6$>$ Localization\+KF\+::P\hspace{0.3cm}{\ttfamily [private]}}



\mbox{\hyperlink{class_state}{State}} Covariance Matrix. 

\mbox{\Hypertarget{class_localization_k_f_a9326f0b3e89d8b1bb488cdb276e2e2c1}\label{class_localization_k_f_a9326f0b3e89d8b1bb488cdb276e2e2c1}} 
\index{LocalizationKF@{LocalizationKF}!R\_GPS@{R\_GPS}}
\index{R\_GPS@{R\_GPS}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{R\_GPS}{R\_GPS}}
{\footnotesize\ttfamily const Eigen\+::\+Diagonal\+Matrix$<$float,6$>$ Localization\+KF\+::\+R\+\_\+\+GPS\hspace{0.3cm}{\ttfamily [private]}}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\{\{\mbox{\hyperlink{class_localization_k_f_a144dc3e1f4b758d211cf721eb01c4bab}{gpsPositionVariance}},}
\DoxyCodeLine{                                                    \mbox{\hyperlink{class_localization_k_f_a9586a554a8b2997164b7ba6392f2e741}{gpsVelocityVariance}},}
\DoxyCodeLine{                                                    \mbox{\hyperlink{class_localization_k_f_a144dc3e1f4b758d211cf721eb01c4bab}{gpsPositionVariance}},}
\DoxyCodeLine{                                                    \mbox{\hyperlink{class_localization_k_f_a9586a554a8b2997164b7ba6392f2e741}{gpsVelocityVariance}},}
\DoxyCodeLine{                                                    \mbox{\hyperlink{class_localization_k_f_aadf6881e8e0d13e4f3dde540eafedd0d}{gpsAltitudeVariance}},}
\DoxyCodeLine{                                                    \mbox{\hyperlink{class_localization_k_f_a9586a554a8b2997164b7ba6392f2e741}{gpsVelocityVariance}}\}\}}

\end{DoxyCode}


Covaraince Matrix for the \mbox{\hyperlink{class_g_p_s}{GPS}} measurements. We assume the variance is constant here where the position variance is given by the CEP and and velocity by the velocity accuracy in the ublox specifications. This is a bold assumption and will likely be changed later when we have more time. Further we assume no covaraince between the measurement as we cannot estimate this. 

\mbox{\Hypertarget{class_localization_k_f_af5fdcbe03ae1416251f8e8b866267f46}\label{class_localization_k_f_af5fdcbe03ae1416251f8e8b866267f46}} 
\index{LocalizationKF@{LocalizationKF}!X@{X}}
\index{X@{X}!LocalizationKF@{LocalizationKF}}
\doxysubsubsection{\texorpdfstring{X}{X}}
{\footnotesize\ttfamily Eigen\+::\+Vector$<$float,6$>$ Localization\+KF\+::X = Eigen\+::\+Vector$<$float,6$>$\+::Zero()\hspace{0.3cm}{\ttfamily [private]}}



\mbox{\hyperlink{class_state}{State}} variable \mbox{[}pn, vn, pe, ve, pd, vd\mbox{]}. 



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/\+Users/kiran/\+Documents/\+Projects/\+ICLR/\+Avionics/\+Ricardo\+\_\+\+OS/\+Ricardo\+\_\+\+OS/src/\+Sensors/\mbox{\hyperlink{localizationkf_8h}{localizationkf.\+h}}\item 
/\+Users/kiran/\+Documents/\+Projects/\+ICLR/\+Avionics/\+Ricardo\+\_\+\+OS/\+Ricardo\+\_\+\+OS/src/\+Sensors/\mbox{\hyperlink{localizationkf_8cpp}{localizationkf.\+cpp}}\end{DoxyCompactItemize}
